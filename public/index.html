<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ë™≠„Åø„Åü„ÅÑ„ÇÇ„ÅÆ„É™„Çπ„Éà üî•</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        
        const BookmarkManager = () => {
            // Áä∂ÊÖãÁÆ°ÁêÜ
            const [urls, setUrls] = useState([]);
            const [newUrl, setNewUrl] = useState('');
            const [selectedGenre, setSelectedGenre] = useState('Êú™ÂàÜÈ°û');
            const [priority, setPriority] = useState(3);
            const [comment, setComment] = useState('');
            const [searchTerm, setSearchTerm] = useState('');
            const [filterGenre, setFilterGenre] = useState('„Åô„Åπ„Å¶');
            const [filterPriority, setFilterPriority] = useState('„Åô„Åπ„Å¶');
            const [filterStatus, setFilterStatus] = useState('„Åô„Åπ„Å¶');
            const [showUnreadOnly, setShowUnreadOnly] = useState(false);
            const [sortBy, setSortBy] = useState('ËøΩÂä†È†Ü');
            const [userId] = useState(() => Math.random().toString(36).substr(2, 8));
            const [apiKey, setApiKey] = useState('');
            const [showApiSettings, setShowApiSettings] = useState(false);
            const [aiAnalysisEnabled, setAiAnalysisEnabled] = useState(false);
            
            const fileInputRef = useRef(null);

            // „Ç∏„É£„É≥„É´ÂÆöÁæ©
            const genres = [
                'Êú™ÂàÜÈ°û', '„Éã„É•„Éº„Çπ', 'ÊäÄË°ì', '„Ç®„É≥„Çø„Éº„ÉÜ„Ç§„É°„É≥„Éà', 'ÊïôËÇ≤',
                '„Éì„Ç∏„Éç„Çπ', '„É©„Ç§„Éï„Çπ„Çø„Ç§„É´', 'ÂÅ•Â∫∑', 'ÊñôÁêÜ', 'ÊóÖË°å',
                '„Çπ„Éù„Éº„ÉÑ', 'Èü≥Ê•Ω', 'Êò†Áîª', '„Ç≤„Éº„É†', '„Éï„Ç°„ÉÉ„Ç∑„Éß„É≥', '„Ç¢„Éº„Éà'
            ];

            // „É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Åã„Çâ„Éá„Éº„ÇøË™≠„ÅøËæº„Åø
            useEffect(() => {
                const savedUrls = localStorage.getItem('bookmarkUrls');
                const savedApiKey = localStorage.getItem('openaiApiKey');
                const savedAiEnabled = localStorage.getItem('aiAnalysisEnabled');
                
                if (savedUrls) {
                    try {
                        setUrls(JSON.parse(savedUrls));
                    } catch (error) {
                        console.error('„Éá„Éº„Çø„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü:', error);
                    }
                }
                
                if (savedApiKey) {
                    setApiKey(savedApiKey);
                }
                
                if (savedAiEnabled) {
                    setAiAnalysisEnabled(savedAiEnabled === 'true');
                }
            }, []);

            // „Éá„Éº„ÇøÂ§âÊõ¥ÊôÇ„Å´„É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Å´‰øùÂ≠ò
            useEffect(() => {
                localStorage.setItem('bookmarkUrls', JSON.stringify(urls));
            }, [urls]);

            useEffect(() => {
                localStorage.setItem('openaiApiKey', apiKey);
            }, [apiKey]);

            useEffect(() => {
                localStorage.setItem('aiAnalysisEnabled', aiAnalysisEnabled.toString());
            }, [aiAnalysisEnabled]);

            // URLÂàÜÊûê„Å®„Ç∏„É£„É≥„É´Âà§ÂÆö
            const analyzeUrl = async (url) => {
                try {
                    const domain = new URL(url).hostname.toLowerCase();
                    
                    // „Éâ„É°„Ç§„É≥„Éô„Éº„Çπ„ÅÆËá™ÂãïÂàÜÈ°û
                    const domainGenreMap = {
                        'youtube.com': '„Ç®„É≥„Çø„Éº„ÉÜ„Ç§„É°„É≥„Éà',
                        'youtu.be': '„Ç®„É≥„Çø„Éº„ÉÜ„Ç§„É°„É≥„Éà',
                        'github.com': 'ÊäÄË°ì',
                        'stackoverflow.com': 'ÊäÄË°ì',
                        'qiita.com': 'ÊäÄË°ì',
                        'zenn.dev': 'ÊäÄË°ì',
                        'note.com': '„É©„Ç§„Éï„Çπ„Çø„Ç§„É´',
                        'medium.com': '„Éì„Ç∏„Éç„Çπ',
                        'nikkei.com': '„Éã„É•„Éº„Çπ',
                        'nhk.or.jp': '„Éã„É•„Éº„Çπ',
                        'asahi.com': '„Éã„É•„Éº„Çπ',
                        'yahoo.co.jp': '„Éã„É•„Éº„Çπ',
                        'cookpad.com': 'ÊñôÁêÜ',
                        'rakuten.com': '„É©„Ç§„Éï„Çπ„Çø„Ç§„É´',
                        'amazon.co.jp': '„É©„Ç§„Éï„Çπ„Çø„Ç§„É´',
                        'netflix.com': '„Ç®„É≥„Çø„Éº„ÉÜ„Ç§„É°„É≥„Éà',
                        'spotify.com': 'Èü≥Ê•Ω',
                        'apple.com': 'ÊäÄË°ì',
                        'microsoft.com': 'ÊäÄË°ì',
                        'google.com': 'ÊäÄË°ì'
                    };

                    let detectedGenre = 'Êú™ÂàÜÈ°û';
                    for (const [domainPattern, genre] of Object.entries(domainGenreMap)) {
                        if (domain.includes(domainPattern)) {
                            detectedGenre = genre;
                            break;
                        }
                    }

                    return { genre: detectedGenre };
                } catch (error) {
                    console.error('URLÂàÜÊûê„Ç®„É©„Éº:', error);
                    return { genre: 'Êú™ÂàÜÈ°û' };
                }
            };

            // AIÂàÜÊûêÔºà„Çø„Ç§„Éà„É´ÁîüÊàêÔºâ
            const analyzeWithAI = async (url) => {
                if (!aiAnalysisEnabled || !apiKey.trim()) {
                    return null;
                }

                try {
                    const response = await fetch('https://api.openai.com/v1/chat/completions', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${apiKey}`
                        },
                        body: JSON.stringify({
                            model: 'gpt-3.5-turbo',
                            messages: [
                                {
                                    role: 'system',
                                    content: '„ÅÇ„Å™„Åü„ÅØÊèê‰æõ„Åï„Çå„ÅüURL„ÇíÂàÜÊûê„Åó„ÄÅ„Åù„ÅÆWeb„Çµ„Ç§„Éà„ÅÆÂÜÖÂÆπ„Çí120ÊñáÂ≠ó‰ª•ÂÜÖ„ÅßÁ∞°ÊΩî„Å´Ë™¨Êòé„Åô„Çã„Çø„Ç§„Éà„É´„ÇíÁîüÊàê„Åô„ÇãÂ∞ÇÈñÄÂÆ∂„Åß„Åô„ÄÇÊó•Êú¨Ë™û„ÅßÂõûÁ≠î„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ'
                                },
                                {
                                    role: 'user',
                                    content: `„Åì„ÅÆURLÔºà${url}Ôºâ„ÅÆÂÜÖÂÆπ„ÇíÂàÜÊûê„Åó„ÄÅ120ÊñáÂ≠ó‰ª•ÂÜÖ„ÅßË™¨ÊòéÁöÑ„Å™„Çø„Ç§„Éà„É´„ÇíÁîüÊàê„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ`
                                }
                            ],
                            max_tokens: 200,
                            temperature: 0.7
                        })
                    });

                    if (!response.ok) {
                        throw new Error(`APIÂëº„Å≥Âá∫„Åó„Ç®„É©„Éº: ${response.status}`);
                    }

                    const data = await response.json();
                    return data.choices[0]?.message?.content?.trim() || null;
                } catch (error) {
                    console.error('AIÂàÜÊûê„Ç®„É©„Éº:', error);
                    return null;
                }
            };

            // URLËøΩÂä†
            const addUrl = async () => {
                if (!newUrl.trim()) return;

                try {
                    new URL(newUrl); // URLÂΩ¢Âºè„ÉÅ„Çß„ÉÉ„ÇØ
                } catch {
                    alert('ÊúâÂäπ„Å™URL„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                    return;
                }

                // ÈáçË§á„ÉÅ„Çß„ÉÉ„ÇØ
                if (urls.some(item => item.url === newUrl)) {
                    alert('„Åì„ÅÆURL„ÅØÊó¢„Å´ËøΩÂä†„Åï„Çå„Å¶„ÅÑ„Åæ„Åô');
                    return;
                }

                // Âü∫Êú¨ÊÉÖÂ†±Ë®≠ÂÆö
                const basicInfo = {
                    id: Date.now().toString(),
                    url: newUrl,
                    title: new URL(newUrl).hostname,
                    genre: selectedGenre,
                    priority: priority,
                    comment: comment,
                    isRead: false,
                    starred: false,
                    createdAt: new Date().toISOString()
                };

                // URL„Çí‰∏ÄÊó¶ËøΩÂä†Ôºà„É≠„Éº„Éá„Ç£„É≥„Ç∞Ë°®Á§∫Áî®Ôºâ
                setUrls(prev => [basicInfo, ...prev]);

                // ÂàÜÊûêÂÆüË°å
                const [analysisResult, aiTitle] = await Promise.all([
                    analyzeUrl(newUrl),
                    analyzeWithAI(newUrl)
                ]);

                // ÂàÜÊûêÁµêÊûú„ÅßÊõ¥Êñ∞
                const finalInfo = {
                    ...basicInfo,
                    title: aiTitle || basicInfo.title,
                    genre: selectedGenre !== 'Êú™ÂàÜÈ°û' ? selectedGenre : analysisResult.genre
                };

                setUrls(prev => prev.map(item => 
                    item.id === basicInfo.id ? finalInfo : item
                ));

                // „Éï„Ç©„Éº„É†„É™„Çª„ÉÉ„Éà
                setNewUrl('');
                setComment('');
                setSelectedGenre('Êú™ÂàÜÈ°û');
                setPriority(3);
            };

            // URLÂâäÈô§
            const deleteUrl = (id) => {
                if (confirm('„Åì„ÅÆURL„ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü')) {
                    setUrls(prev => prev.filter(item => item.id !== id));
                }
            };

            // URLÊõ¥Êñ∞
            const updateUrl = (id, updatedItem) => {
                setUrls(prev => prev.map(item => 
                    item.id === id ? updatedItem : item
                ));
            };

            // URL„ÅÆ‰∏¶„Å≥È†ÜÂ§âÊõ¥
            const moveUrl = (index, direction) => {
                const newIndex = index + direction;
                if (newIndex < 0 || newIndex >= filteredUrls.length) return;

                const newUrls = [...urls];
                const currentItem = filteredUrls[index];
                const targetItem = filteredUrls[newIndex];
                
                const currentOriginalIndex = newUrls.findIndex(item => item.id === currentItem.id);
                const targetOriginalIndex = newUrls.findIndex(item => item.id === targetItem.id);
                
                [newUrls[currentOriginalIndex], newUrls[targetOriginalIndex]] = 
                [newUrls[targetOriginalIndex], newUrls[currentOriginalIndex]];
                
                setUrls(newUrls);
            };

            // „Éá„Éº„Çø„Ç®„ÇØ„Çπ„Éù„Éº„Éà
            const exportData = () => {
                const dataStr = JSON.stringify(urls, null, 2);
                const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
                const exportFileDefaultName = `bookmarks_${new Date().toISOString().split('T')[0]}.json`;
                
                const linkElement = document.createElement('a');
                linkElement.setAttribute('href', dataUri);
                linkElement.setAttribute('download', exportFileDefaultName);
                linkElement.click();
            };

            // „Éá„Éº„Çø„Ç§„É≥„Éù„Éº„Éà
            const importData = (event) => {
                const file = event.target.files[0];
                if (!file) return;

                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const importedData = JSON.parse(e.target.result);
                        if (Array.isArray(importedData)) {
                            if (confirm('ÁèæÂú®„ÅÆ„Éá„Éº„Çø„Çí‰∏äÊõ∏„Åç„Åó„Åæ„Åô„ÅãÔºüÔºàÁèæÂú®„ÅÆ„Éá„Éº„Çø„ÅØÂ§±„Çè„Çå„Åæ„ÅôÔºâ')) {
                                setUrls(importedData);
                                alert('„Éá„Éº„Çø„Çí„Ç§„É≥„Éù„Éº„Éà„Åó„Åæ„Åó„Åü');
                            }
                        } else {
                            alert('ÁÑ°Âäπ„Å™„Éï„Ç°„Ç§„É´ÂΩ¢Âºè„Åß„Åô');
                        }
                    } catch (error) {
                        alert('„Éï„Ç°„Ç§„É´„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
                    }
                };
                reader.readAsText(file);
                event.target.value = '';
            };

            // „Éï„Ç£„É´„Çø„É™„É≥„Ç∞„Å®„ÇΩ„Éº„Éà
            const filteredUrls = urls.filter(item => {
                const matchesSearch = !searchTerm || 
                    item.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    item.url.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    (item.comment && item.comment.toLowerCase().includes(searchTerm.toLowerCase()));
                
                const matchesGenre = filterGenre === '„Åô„Åπ„Å¶' || item.genre === filterGenre;
                const matchesPriority = filterPriority === '„Åô„Åπ„Å¶' || item.priority.toString() === filterPriority;
                const matchesStatus = filterStatus === '„Åô„Åπ„Å¶' || 
                    (filterStatus === 'Êó¢Ë™≠' && item.isRead) ||
                    (filterStatus === 'Êú™Ë™≠' && !item.isRead) ||
                    (filterStatus === '„ÅäÊ∞ó„Å´ÂÖ•„Çä' && item.starred);
                const matchesUnread = !showUnreadOnly || !item.isRead;

                return matchesSearch && matchesGenre && matchesPriority && matchesStatus && matchesUnread;
            }).sort((a, b) => {
                switch (sortBy) {
                    case 'ËøΩÂä†È†Ü':
                        return new Date(b.createdAt) - new Date(a.createdAt);
                    case 'ÂÑ™ÂÖàÂ∫¶':
                        return b.priority - a.priority;
                    case '„Çø„Ç§„Éà„É´':
                        return a.title.localeCompare(b.title);
                    case '„Ç∏„É£„É≥„É´':
                        return a.genre.localeCompare(b.genre);
                    default:
                        return 0;
                }
            });

            // URL„Ç¢„Ç§„ÉÜ„É†„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà
            const UrlItem = ({ item, index, onUpdate, onDelete, onMove }) => {
                const [isEditingComment, setIsEditingComment] = useState(false);
                const [editCommentValue, setEditCommentValue] = useState(item.comment || '');

                const startEdit = () => {
                    setEditCommentValue(item.comment || '');
                    setIsEditingComment(true);
                };

                const saveComment = () => {
                    onUpdate(item.id, { ...item, comment: editCommentValue });
                    setIsEditingComment(false);
                };

                const cancelEdit = () => {
                    setEditCommentValue(item.comment || '');
                    setIsEditingComment(false);
                };

                return (
                    <div className="border rounded-lg p-4 bg-white shadow-sm">
                        <div className="flex justify-between items-start mb-2">
                            <div className="flex-1 min-w-0">
                                <div className="flex items-center gap-2 mb-1">
                                    <img 
                                        src={`https://www.google.com/s2/favicons?domain=${new URL(item.url).hostname}&sz=16`}
                                        alt=""
                                        className="w-4 h-4 flex-shrink-0"
                                        onError={(e) => e.target.style.display = 'none'}
                                    />
                                    <h3 className="font-medium text-gray-900 truncate flex-1">
                                        {item.title}
                                    </h3>
                                </div>
                                <p className="text-xs text-gray-500 mb-1">
                                    {new URL(item.url).hostname}
                                </p>
                            </div>
                            
                            <div className="flex gap-1 ml-2 flex-shrink-0">
                                <button
                                    onClick={() => onMove(index, -1)}
                                    disabled={index === 0}
                                    className={`p-1 rounded text-xs ${index === 0 ? 'text-gray-300' : 'text-gray-600 hover:bg-gray-100'}`}
                                >
                                    <i className="fas fa-chevron-up"></i>
                                </button>
                                <button
                                    onClick={() => onMove(index, 1)}
                                    className="p-1 rounded text-xs text-gray-600 hover:bg-gray-100"
                                >
                                    <i className="fas fa-chevron-down"></i>
                                </button>
                                <button
                                    onClick={() => onUpdate(item.id, { ...item, isRead: !item.isRead })}
                                    className={`p-1 rounded text-xs ${item.isRead ? 'text-green-600' : 'text-gray-400'}`}
                                >
                                    <i className={`fas ${item.isRead ? 'fa-check-circle' : 'fa-circle'}`}></i>
                                </button>
                                <button
                                    onClick={() => onUpdate(item.id, { ...item, starred: !item.starred })}
                                    className={`p-1 rounded text-xs ${item.starred ? 'text-yellow-500' : 'text-gray-400'}`}
                                >
                                    <i className={`fas fa-star`}></i>
                                </button>
                                <a
                                    href={item.url}
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    className="p-1 rounded text-xs text-blue-600 hover:bg-blue-50"
                                >
                                    <i className="fas fa-external-link-alt"></i>
                                </a>
                                <button
                                    onClick={() => onDelete(item.id)}
                                    className="p-1 rounded text-xs text-red-600 hover:bg-red-50"
                                >
                                    <i className="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div className="flex gap-2 mb-2">
                            <span className="inline-block px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded">
                                {item.genre}
                            </span>
                            <span className="inline-block px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded">
                                ÂÑ™ÂÖàÂ∫¶: {item.priority}
                            </span>
                        </div>
                        
                        {/* „Ç≥„É°„É≥„ÉàÊ¨ÑÔºàÂ∏∏„Å´Ë°®Á§∫Ôºâ */}
                        <div className="mt-2 p-2 bg-gray-50 rounded text-sm">
                            {isEditingComment ? (
                                <div className="flex gap-2">
                                    <textarea
                                        value={editCommentValue}
                                        onChange={(e) => setEditCommentValue(e.target.value)}
                                        className="flex-1 p-2 border rounded text-sm"
                                        placeholder="„Ç≥„É°„É≥„Éà„ÇíÂÖ•Âäõ..."
                                        rows="2"
                                    />
                                    <div className="flex flex-col gap-1">
                                        <button
                                            onClick={saveComment}
                                            className="px-3 py-1 bg-blue-500 text-white rounded text-xs hover:bg-blue-600"
                                        >
                                            ‰øùÂ≠ò
                                        </button>
                                        <button
                                            onClick={cancelEdit}
                                            className="px-3 py-1 bg-gray-500 text-white rounded text-xs hover:bg-gray-600"
                                        >
                                            „Ç≠„É£„É≥„Çª„É´
                                        </button>
                                    </div>
                                </div>
                            ) : (
                                <div className="flex justify-between items-start">
                                    <div className="flex-1">
                                        {item.comment ? (
                                            <span className="text-gray-700">{item.comment}</span>
                                        ) : (
                                            <span className="text-gray-400 italic">„Ç≥„É°„É≥„Éà„ÇíËøΩÂä†...</span>
                                        )}
                                    </div>
                                    <button
                                        onClick={startEdit}
                                        className="ml-2 px-2 py-1 bg-gray-200 hover:bg-gray-300 rounded text-xs"
                                    >
                                        {item.comment ? 'Á∑®ÈõÜ' : 'ËøΩÂä†'}
                                    </button>
                                </div>
                            )}
                        </div>
                        
                        <div className="text-xs text-gray-400 mt-2">
                            ËøΩÂä†Êó•ÊôÇ: {new Date(item.createdAt).toLocaleString('ja-JP')}
                        </div>
                    </div>
                );
            };

            return (
                <div className="max-w-4xl mx-auto p-4 bg-gray-100 min-h-screen">
                    {/* „Éò„ÉÉ„ÉÄ„Éº */}
                    <div className="text-center mb-6">
                        <h1 className="text-3xl font-bold text-gray-800 mb-2">Ë™≠„Åø„Åü„ÅÑ„ÇÇ„ÅÆ„É™„Çπ„Éà üî•</h1>
                        <p className="text-gray-600">Ê∞ó„Å´„Å™„ÇãWeb„Çµ„Ç§„Éà„Çí„É™„Çπ„Éà„Ç¢„ÉÉ„Éó„Åó„Å¶„ÄÅÁÆ°ÁêÜ„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ</p>
                        <p className="text-sm text-gray-500 mt-2">
                            v2.9üë§ „É¶„Éº„Ç∂„ÉºID: {userId} | üïí ÊúÄÁµÇÊõ¥Êñ∞: {new Date().toLocaleString('ja-JP')}
                        </p>
                    </div>

                    {/* AIË®≠ÂÆö„Çª„ÇØ„Ç∑„Éß„É≥ */}
                    <div className="mb-4 p-4 bg-white rounded-lg shadow-sm border">
                        <div className="flex items-center justify-between mb-2">
                            <div className="flex items-center gap-2">
                                <span className="text-sm font-medium">ü§ñ AI</span>
                                <span className="text-sm">AIÂÜÖÂÆπÂàÜÊûêÊ©üËÉΩ„Åß120ÊñáÂ≠ó„ÅÆË™¨ÊòéÁöÑ„Çø„Ç§„Éà„É´„ÇíËá™ÂãïÁîüÊàêÔºÅ</span>
                                <span className="text-xs text-red-500">Ë¶ÅAPIË®≠ÂÆö</span>
                            </div>
                            <div className="flex items-center gap-2">
                                <label className="flex items-center cursor-pointer">
                                    <input
                                        type="checkbox"
                                        checked={aiAnalysisEnabled}
                                        onChange={(e) => setAiAnalysisEnabled(e.target.checked)}
                                        className="sr-only"
                                    />
                                    <div className={`relative w-12 h-6 rounded-full transition-colors duration-200 ${aiAnalysisEnabled ? 'bg-blue-500' : 'bg-gray-300'}`}>
                                        <div className={`absolute w-5 h-5 bg-white rounded-full shadow-md transition-transform duration-200 top-0.5 ${aiAnalysisEnabled ? 'translate-x-6' : 'translate-x-0.5'}`}></div>
                                    </div>
                                </label>
                                <span className="text-sm text-gray-600">{aiAnalysisEnabled ? 'ON' : 'OFF'}</span>
                                <button
                                    onClick={() => setShowApiSettings(!showApiSettings)}
                                    className="px-3 py-1 bg-gray-200 hover:bg-gray-300 rounded text-xs"
                                >
                                    <i className="fas fa-cog"></i> Ë®≠ÂÆö
                                </button>
                            </div>
                        </div>
                        
                        {showApiSettings && (
                            <div className="mt-3 p-3 bg-gray-50 rounded border">
                                <label className="block text-sm font-medium text-gray-700 mb-2">
                                    OpenAI API „Ç≠„Éº:
                                </label>
                                <input
                                    type="password"
                                    value={apiKey}
                                    onChange={(e) => setApiKey(e.target.value)}
                                    placeholder="sk-..."
                                    className="w-full p-2 border rounded text-sm"
                                />
                                <p className="text-xs text-gray-500 mt-1">
                                    ‚Äª API„Ç≠„Éº„ÅØ„Éñ„É©„Ç¶„Ç∂„ÅÆ„É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Å´‰øùÂ≠ò„Åï„Çå„Åæ„Åô
                                </p>
                            </div>
                        )}
                    </div>

                    {/* URLËøΩÂä†„Éï„Ç©„Éº„É† */}
                    <div className="mb-6 p-4 bg-white rounded-lg shadow-sm border">
                        <h2 className="text-xl font-semibold mb-4">üìå Êñ∞„Åó„ÅÑURL„ÇíËøΩÂä†</h2>
                        
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4">
                            <div className="lg:col-span-2">
                                <label className="block text-sm font-medium text-gray-700 mb-1">URL</label>
                                <input
                                    type="url"
                                    value={newUrl}
                                    onChange={(e) => setNewUrl(e.target.value)}
                                    placeholder="https://..."
                                    className="w-full p-2 border rounded"
                                />
                            </div>
                            
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">„Ç∏„É£„É≥„É´</label>
                                <select
                                    value={selectedGenre}
                                    onChange={(e) => setSelectedGenre(e.target.value)}
                                    className="w-full p-2 border rounded"
                                >
                                    {genres.map(genre => (
                                        <option key={genre} value={genre}>{genre}</option>
                                    ))}
                                </select>
                            </div>
                            
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">ÂÑ™ÂÖàÂ∫¶ (0-5)</label>
                                <input
                                    type="number"
                                    min="0"
                                    max="5"
                                    value={priority}
                                    onChange={(e) => setPriority(parseInt(e.target.value))}
                                    className="w-full p-2 border rounded"
                                />
                            </div>
                        </div>
                        
                        <div className="mb-4">
                            <label className="block text-sm font-medium text-gray-700 mb-1">„Ç≥„É°„É≥„ÉàÔºà‰ªªÊÑèÔºâ</label>
                            <textarea
                                value={comment}
                                onChange={(e) => setComment(e.target.value)}
                                placeholder="„Åì„ÅÆURL„Å´„Å§„ÅÑ„Å¶„ÅÆ„É°„É¢..."
                                className="w-full p-2 border rounded"
                                rows="2"
                            />
                        </div>
                        
                        <button
                            onClick={addUrl}
                            className="w-full bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 transition-colors"
                        >
                            <i className="fas fa-plus mr-2"></i>URL„ÇíËøΩÂä†
                        </button>
                    </div>

                    {/* Ê§úÁ¥¢„Éª„Éï„Ç£„É´„Çø„Éª„ÇΩ„Éº„Éà */}
                    <div className="mb-6 p-4 bg-white rounded-lg shadow-sm border">
                        <h2 className="text-xl font-semibold mb-4">üîç Ê§úÁ¥¢„Éª„Éï„Ç£„É´„Çø</h2>
                        
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">Ê§úÁ¥¢</label>
                                <input
                                    type="text"
                                    value={searchTerm}
                                    onChange={(e) => setSearchTerm(e.target.value)}
                                    placeholder="„Çø„Ç§„Éà„É´„ÄÅURL„ÄÅ„Ç≥„É°„É≥„Éà„ÅßÊ§úÁ¥¢..."
                                    className="w-full p-2 border rounded"
                                />
                            </div>
                            
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">„Ç∏„É£„É≥„É´</label>
                                <select
                                    value={filterGenre}
                                    onChange={(e) => setFilterGenre(e.target.value)}
                                    className="w-full p-2 border rounded"
                                >
                                    <option value="„Åô„Åπ„Å¶">„Åô„Åπ„Å¶</option>
                                    {genres.map(genre => (
                                        <option key={genre} value={genre}>{genre}</option>
                                    ))}
                                </select>
                            </div>
                            
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">ÂÑ™ÂÖàÂ∫¶</label>
                                <select
                                    value={filterPriority}
                                    onChange={(e) => setFilterPriority(e.target.value)}
                                    className="w-full p-2 border rounded"
                                >
                                    <option value="„Åô„Åπ„Å¶">„Åô„Åπ„Å¶</option>
                                    {[0,1,2,3,4,5].map(p => (
                                        <option key={p} value={p.toString()}>{p}</option>
                                    ))}
                                </select>
                            </div>
                            
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">„Çπ„ÉÜ„Éº„Çø„Çπ</label>
                                <select
                                    value={filterStatus}
                                    onChange={(e) => setFilterStatus(e.target.value)}
                                    className="w-full p-2 border rounded"
                                >
                                    <option value="„Åô„Åπ„Å¶">„Åô„Åπ„Å¶</option>
                                    <option value="Êú™Ë™≠">Êú™Ë™≠</option>
                                    <option value="Êó¢Ë™≠">Êó¢Ë™≠</option>
                                    <option value="„ÅäÊ∞ó„Å´ÂÖ•„Çä">„ÅäÊ∞ó„Å´ÂÖ•„Çä</option>
                                </select>
                            </div>
                            
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">„ÇΩ„Éº„Éà</label>
                                <select
                                    value={sortBy}
                                    onChange={(e) => setSortBy(e.target.value)}
                                    className="w-full p-2 border rounded"
                                >
                                    <option value="ËøΩÂä†È†Ü">ËøΩÂä†È†Ü</option>
                                    <option value="ÂÑ™ÂÖàÂ∫¶">ÂÑ™ÂÖàÂ∫¶</option>
                                    <option value="„Çø„Ç§„Éà„É´">„Çø„Ç§„Éà„É´</option>
                                    <option value="„Ç∏„É£„É≥„É´">„Ç∏„É£„É≥„É´</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    {/* „Éá„Éº„ÇøÁÆ°ÁêÜ */}
                    <div className="mb-6 p-4 bg-white rounded-lg shadow-sm border">
                        <h2 className="text-xl font-semibold mb-4">üíæ „Éá„Éº„ÇøÁÆ°ÁêÜ</h2>
                        <div className="flex gap-4">
                            <button
                                onClick={exportData}
                                className="bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600 transition-colors"
                            >
                                <i className="fas fa-download mr-2"></i>„Ç®„ÇØ„Çπ„Éù„Éº„Éà
                            </button>
                            <button
                                onClick={() => fileInputRef.current?.click()}
                                className="bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 transition-colors"
                            >
                                <i className="fas fa-upload mr-2"></i>„Ç§„É≥„Éù„Éº„Éà
                            </button>
                            <input
                                ref={fileInputRef}
                                type="file"
                                accept=".json"
                                onChange={importData}
                                className="hidden"
                            />
                        </div>
                    </div>

                    {/* Áµ±Ë®àÊÉÖÂ†± */}
                    <div className="mb-6 p-4 bg-white rounded-lg shadow-sm border">
                        <h2 className="text-xl font-semibold mb-4">üìä Áµ±Ë®à</h2>
                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                            <div>
                                <div className="text-2xl font-bold text-blue-600">{urls.length}</div>
                                <div className="text-sm text-gray-600">Á∑èURLÊï∞</div>
                            </div>
                            <div>
                                <div className="text-2xl font-bold text-green-600">
                                    {urls.filter(item => item.isRead).length}
                                </div>
                                <div className="text-sm text-gray-600">Êó¢Ë™≠</div>
                            </div>
                            <div>
                                <div className="text-2xl font-bold text-yellow-600">
                                    {urls.filter(item => item.starred).length}
                                </div>
                                <div className="text-sm text-gray-600">„ÅäÊ∞ó„Å´ÂÖ•„Çä</div>
                            </div>
                            <div>
                                <div className="text-2xl font-bold text-purple-600">{filteredUrls.length}</div>
                                <div className="text-sm text-gray-600">Ë°®Á§∫‰∏≠</div>
                            </div>
                        </div>
                    </div>

                    {/* URL„É™„Çπ„Éà */}
                    <div className="space-y-4">
                        <h2 className="text-xl font-semibold">üìã URL„É™„Çπ„Éà ({filteredUrls.length}‰ª∂)</h2>
                        
                        {filteredUrls.length === 0 ? (
                            <div className="text-center py-8 text-gray-500">
                                <i className="fas fa-inbox text-4xl mb-4"></i>
                                <p>Ë°®Á§∫„Åô„ÇãURL„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</p>
                                <p className="text-sm">URL„ÇíËøΩÂä†„Åô„Çã„Åã„ÄÅ„Éï„Ç£„É´„ÇøÊù°‰ª∂„ÇíÂ§âÊõ¥„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>
                            </div>
                        ) : (
                            filteredUrls.map((item, index) => (
                                <UrlItem
                                    key={item.id}
                                    item={item}
                                    index={index}
                                    onUpdate={updateUrl}
                                    onDelete={deleteUrl}
                                    onMove={moveUrl}
                                />
                            ))
                        )}
                    </div>
                </div>
            );
        };

        ReactDOM.render(<BookmarkManager />, document.getElementById('root'));
    </script>
</body>
</html>
