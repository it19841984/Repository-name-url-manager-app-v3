<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>読みたいものリスト 🔥</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        
        const BookmarkManager = () => {
            // 状態管理
            const [urls, setUrls] = useState([]);
            const [newUrl, setNewUrl] = useState('');
            const [selectedGenre, setSelectedGenre] = useState('未分類');
            const [priority, setPriority] = useState(3);
            const [comment, setComment] = useState('');
            const [searchTerm, setSearchTerm] = useState('');
            const [filterGenre, setFilterGenre] = useState('すべて');
            const [filterPriority, setFilterPriority] = useState('すべて');
            const [filterStatus, setFilterStatus] = useState('すべて');
            const [showUnreadOnly, setShowUnreadOnly] = useState(false);
            const [sortBy, setSortBy] = useState('追加順');
            const [userId] = useState(() => Math.random().toString(36).substr(2, 8));
            const [apiKey, setApiKey] = useState('');
            const [showApiSettings, setShowApiSettings] = useState(false);
            const [aiAnalysisEnabled, setAiAnalysisEnabled] = useState(false);
            
            const fileInputRef = useRef(null);

            // ジャンル定義
            const genres = [
                '未分類', 'ニュース', '技術', 'エンターテイメント', '教育',
                'ビジネス', 'ライフスタイル', '健康', '料理', '旅行',
                'スポーツ', '音楽', '映画', 'ゲーム', 'ファッション', 'アート'
            ];

            // ローカルストレージからデータ読み込み
            useEffect(() => {
                const savedUrls = localStorage.getItem('bookmarkUrls');
                const savedApiKey = localStorage.getItem('openaiApiKey');
                const savedAiEnabled = localStorage.getItem('aiAnalysisEnabled');
                
                if (savedUrls) {
                    try {
                        setUrls(JSON.parse(savedUrls));
                    } catch (error) {
                        console.error('データの読み込みに失敗しました:', error);
                    }
                }
                
                if (savedApiKey) {
                    setApiKey(savedApiKey);
                }
                
                if (savedAiEnabled) {
                    setAiAnalysisEnabled(savedAiEnabled === 'true');
                }
            }, []);

            // データ変更時にローカルストレージに保存
            useEffect(() => {
                localStorage.setItem('bookmarkUrls', JSON.stringify(urls));
            }, [urls]);

            useEffect(() => {
                localStorage.setItem('openaiApiKey', apiKey);
            }, [apiKey]);

            useEffect(() => {
                localStorage.setItem('aiAnalysisEnabled', aiAnalysisEnabled.toString());
            }, [aiAnalysisEnabled]);

            // URL分析とジャンル判定
            const analyzeUrl = async (url) => {
                try {
                    const domain = new URL(url).hostname.toLowerCase();
                    
                    // ドメインベースの自動分類
                    const domainGenreMap = {
                        'youtube.com': 'エンターテイメント',
                        'youtu.be': 'エンターテイメント',
                        'github.com': '技術',
                        'stackoverflow.com': '技術',
                        'qiita.com': '技術',
                        'zenn.dev': '技術',
                        'note.com': 'ライフスタイル',
                        'medium.com': 'ビジネス',
                        'nikkei.com': 'ニュース',
                        'nhk.or.jp': 'ニュース',
                        'asahi.com': 'ニュース',
                        'yahoo.co.jp': 'ニュース',
                        'cookpad.com': '料理',
                        'rakuten.com': 'ライフスタイル',
                        'amazon.co.jp': 'ライフスタイル',
                        'netflix.com': 'エンターテイメント',
                        'spotify.com': '音楽',
                        'apple.com': '技術',
                        'microsoft.com': '技術',
                        'google.com': '技術'
                    };

                    let detectedGenre = '未分類';
                    for (const [domainPattern, genre] of Object.entries(domainGenreMap)) {
                        if (domain.includes(domainPattern)) {
                            detectedGenre = genre;
                            break;
                        }
                    }

                    return { genre: detectedGenre };
                } catch (error) {
                    console.error('URL分析エラー:', error);
                    return { genre: '未分類' };
                }
            };

            // AI分析（タイトル生成）
            const analyzeWithAI = async (url) => {
                if (!aiAnalysisEnabled || !apiKey.trim()) {
                    return null;
                }

                try {
                    const response = await fetch('https://api.openai.com/v1/chat/completions', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${apiKey}`
                        },
                        body: JSON.stringify({
                            model: 'gpt-3.5-turbo',
                            messages: [
                                {
                                    role: 'system',
                                    content: 'あなたは提供されたURLを分析し、そのWebサイトの内容を120文字以内で簡潔に説明するタイトルを生成する専門家です。日本語で回答してください。'
                                },
                                {
                                    role: 'user',
                                    content: `このURL（${url}）の内容を分析し、120文字以内で説明的なタイトルを生成してください。`
                                }
                            ],
                            max_tokens: 200,
                            temperature: 0.7
                        })
                    });

                    if (!response.ok) {
                        throw new Error(`API呼び出しエラー: ${response.status}`);
                    }

                    const data = await response.json();
                    return data.choices[0]?.message?.content?.trim() || null;
                } catch (error) {
                    console.error('AI分析エラー:', error);
                    return null;
                }
            };

            // URL追加
            const addUrl = async () => {
                if (!newUrl.trim()) return;

                try {
                    new URL(newUrl); // URL形式チェック
                } catch {
                    alert('有効なURLを入力してください');
                    return;
                }

                // 重複チェック
                if (urls.some(item => item.url === newUrl)) {
                    alert('このURLは既に追加されています');
                    return;
                }

                // 基本情報設定
                const basicInfo = {
                    id: Date.now().toString(),
                    url: newUrl,
                    title: new URL(newUrl).hostname,
                    genre: selectedGenre,
                    priority: priority,
                    comment: comment,
                    isRead: false,
                    starred: false,
                    createdAt: new Date().toISOString()
                };

                // URLを一旦追加（ローディング表示用）
                setUrls(prev => [basicInfo, ...prev]);

                // 分析実行
                const [analysisResult, aiTitle] = await Promise.all([
                    analyzeUrl(newUrl),
                    analyzeWithAI(newUrl)
                ]);

                // 分析結果で更新
                const finalInfo = {
                    ...basicInfo,
                    title: aiTitle || basicInfo.title,
                    genre: selectedGenre !== '未分類' ? selectedGenre : analysisResult.genre
                };

                setUrls(prev => prev.map(item => 
                    item.id === basicInfo.id ? finalInfo : item
                ));

                // フォームリセット
                setNewUrl('');
                setComment('');
                setSelectedGenre('未分類');
                setPriority(3);
            };

            // URL削除
            const deleteUrl = (id) => {
                if (confirm('このURLを削除しますか？')) {
                    setUrls(prev => prev.filter(item => item.id !== id));
                }
            };

            // URL更新
            const updateUrl = (id, updatedItem) => {
                setUrls(prev => prev.map(item => 
                    item.id === id ? updatedItem : item
                ));
            };

            // URLの並び順変更
            const moveUrl = (index, direction) => {
                const newIndex = index + direction;
                if (newIndex < 0 || newIndex >= filteredUrls.length) return;

                const newUrls = [...urls];
                const currentItem = filteredUrls[index];
                const targetItem = filteredUrls[newIndex];
                
                const currentOriginalIndex = newUrls.findIndex(item => item.id === currentItem.id);
                const targetOriginalIndex = newUrls.findIndex(item => item.id === targetItem.id);
                
                [newUrls[currentOriginalIndex], newUrls[targetOriginalIndex]] = 
                [newUrls[targetOriginalIndex], newUrls[currentOriginalIndex]];
                
                setUrls(newUrls);
            };

            // データエクスポート
            const exportData = () => {
                const dataStr = JSON.stringify(urls, null, 2);
                const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
                const exportFileDefaultName = `bookmarks_${new Date().toISOString().split('T')[0]}.json`;
                
                const linkElement = document.createElement('a');
                linkElement.setAttribute('href', dataUri);
                linkElement.setAttribute('download', exportFileDefaultName);
                linkElement.click();
            };

            // データインポート
            const importData = (event) => {
                const file = event.target.files[0];
                if (!file) return;

                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const importedData = JSON.parse(e.target.result);
                        if (Array.isArray(importedData)) {
                            if (confirm('現在のデータを上書きしますか？（現在のデータは失われます）')) {
                                setUrls(importedData);
                                alert('データをインポートしました');
                            }
                        } else {
                            alert('無効なファイル形式です');
                        }
                    } catch (error) {
                        alert('ファイルの読み込みに失敗しました');
                    }
                };
                reader.readAsText(file);
                event.target.value = '';
            };

            // フィルタリングとソート
            const filteredUrls = urls.filter(item => {
                const matchesSearch = !searchTerm || 
                    item.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    item.url.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    (item.comment && item.comment.toLowerCase().includes(searchTerm.toLowerCase()));
                
                const matchesGenre = filterGenre === 'すべて' || item.genre === filterGenre;
                const matchesPriority = filterPriority === 'すべて' || item.priority.toString() === filterPriority;
                const matchesStatus = filterStatus === 'すべて' || 
                    (filterStatus === '既読' && item.isRead) ||
                    (filterStatus === '未読' && !item.isRead) ||
                    (filterStatus === 'お気に入り' && item.starred);
                const matchesUnread = !showUnreadOnly || !item.isRead;

                return matchesSearch && matchesGenre && matchesPriority && matchesStatus && matchesUnread;
            }).sort((a, b) => {
                switch (sortBy) {
                    case '追加順':
                        return new Date(b.createdAt) - new Date(a.createdAt);
                    case '優先度':
                        return b.priority - a.priority;
                    case 'タイトル':
                        return a.title.localeCompare(b.title);
                    case 'ジャンル':
                        return a.genre.localeCompare(b.genre);
                    default:
                        return 0;
                }
            });

            // URLアイテムコンポーネント
            const UrlItem = ({ item, index, onUpdate, onDelete, onMove }) => {
                const [isEditingComment, setIsEditingComment] = useState(false);
                const [editCommentValue, setEditCommentValue] = useState(item.comment || '');

                const startEdit = () => {
                    setEditCommentValue(item.comment || '');
                    setIsEditingComment(true);
                };

                const saveComment = () => {
                    onUpdate(item.id, { ...item, comment: editCommentValue });
                    setIsEditingComment(false);
                };

                const cancelEdit = () => {
                    setEditCommentValue(item.comment || '');
                    setIsEditingComment(false);
                };

                return (
                    <div className="border rounded-lg p-4 bg-white shadow-sm">
                        <div className="flex justify-between items-start mb-2">
                            <div className="flex-1 min-w-0">
                                <div className="flex items-center gap-2 mb-1">
                                    <img 
                                        src={`https://www.google.com/s2/favicons?domain=${new URL(item.url).hostname}&sz=16`}
                                        alt=""
                                        className="w-4 h-4 flex-shrink-0"
                                        onError={(e) => e.target.style.display = 'none'}
                                    />
                                    <h3 className="font-medium text-gray-900 truncate flex-1">
                                        {item.title}
                                    </h3>
                                </div>
                                <p className="text-xs text-gray-500 mb-1">
                                    {new URL(item.url).hostname}
                                </p>
                            </div>
                            
                            <div className="flex gap-1 ml-2 flex-shrink-0">
                                <button
                                    onClick={() => onMove(index, -1)}
                                    disabled={index === 0}
                                    className={`p-1 rounded text-xs ${index === 0 ? 'text-gray-300' : 'text-gray-600 hover:bg-gray-100'}`}
                                >
                                    <i className="fas fa-chevron-up"></i>
                                </button>
                                <button
                                    onClick={() => onMove(index, 1)}
                                    className="p-1 rounded text-xs text-gray-600 hover:bg-gray-100"
                                >
                                    <i className="fas fa-chevron-down"></i>
                                </button>
                                <button
                                    onClick={() => onUpdate(item.id, { ...item, isRead: !item.isRead })}
                                    className={`p-1 rounded text-xs ${item.isRead ? 'text-green-600' : 'text-gray-400'}`}
                                >
                                    <i className={`fas ${item.isRead ? 'fa-check-circle' : 'fa-circle'}`}></i>
                                </button>
                                <button
                                    onClick={() => onUpdate(item.id, { ...item, starred: !item.starred })}
                                    className={`p-1 rounded text-xs ${item.starred ? 'text-yellow-500' : 'text-gray-400'}`}
                                >
                                    <i className={`fas fa-star`}></i>
                                </button>
                                <a
                                    href={item.url}
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    className="p-1 rounded text-xs text-blue-600 hover:bg-blue-50"
                                >
                                    <i className="fas fa-external-link-alt"></i>
                                </a>
                                <button
                                    onClick={() => onDelete(item.id)}
                                    className="p-1 rounded text-xs text-red-600 hover:bg-red-50"
                                >
                                    <i className="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div className="flex gap-2 mb-2">
                            <span className="inline-block px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded">
                                {item.genre}
                            </span>
                            <span className="inline-block px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded">
                                優先度: {item.priority}
                            </span>
                        </div>
                        
                        {/* コメント欄（常に表示） */}
                        <div className="mt-2 p-2 bg-gray-50 rounded text-sm">
                            {isEditingComment ? (
                                <div className="flex gap-2">
                                    <textarea
                                        value={editCommentValue}
                                        onChange={(e) => setEditCommentValue(e.target.value)}
                                        className="flex-1 p-2 border rounded text-sm"
                                        placeholder="コメントを入力..."
                                        rows="2"
                                    />
                                    <div className="flex flex-col gap-1">
                                        <button
                                            onClick={saveComment}
                                            className="px-3 py-1 bg-blue-500 text-white rounded text-xs hover:bg-blue-600"
                                        >
                                            保存
                                        </button>
                                        <button
                                            onClick={cancelEdit}
                                            className="px-3 py-1 bg-gray-500 text-white rounded text-xs hover:bg-gray-600"
                                        >
                                            キャンセル
                                        </button>
                                    </div>
                                </div>
                            ) : (
                                <div className="flex justify-between items-start">
                                    <div className="flex-1">
                                        {item.comment ? (
                                            <span className="text-gray-700">{item.comment}</span>
                                        ) : (
                                            <span className="text-gray-400 italic">コメントを追加...</span>
                                        )}
                                    </div>
                                    <button
                                        onClick={startEdit}
                                        className="ml-2 px-2 py-1 bg-gray-200 hover:bg-gray-300 rounded text-xs"
                                    >
                                        {item.comment ? '編集' : '追加'}
                                    </button>
                                </div>
                            )}
                        </div>
                        
                        <div className="text-xs text-gray-400 mt-2">
                            追加日時: {new Date(item.createdAt).toLocaleString('ja-JP')}
                        </div>
                    </div>
                );
            };

            return (
                <div className="max-w-4xl mx-auto p-4 bg-gray-100 min-h-screen">
                    {/* ヘッダー */}
                    <div className="text-center mb-6">
                        <h1 className="text-3xl font-bold text-gray-800 mb-2">読みたいものリスト 🔥</h1>
                        <p className="text-gray-600">気になるWebサイトをリストアップして、管理しましょう。</p>
                        <p className="text-sm text-gray-500 mt-2">
                            v2.9👤 ユーザーID: {userId} | 🕒 最終更新: {new Date().toLocaleString('ja-JP')}
                        </p>
                    </div>

                    {/* AI設定セクション */}
                    <div className="mb-4 p-4 bg-white rounded-lg shadow-sm border">
                        <div className="flex items-center justify-between mb-2">
                            <div className="flex items-center gap-2">
                                <span className="text-sm font-medium">🤖 AI</span>
                                <span className="text-sm">AI内容分析機能で120文字の説明的タイトルを自動生成！</span>
                                <span className="text-xs text-red-500">要API設定</span>
                            </div>
                            <div className="flex items-center gap-2">
                                <label className="flex items-center cursor-pointer">
                                    <input
                                        type="checkbox"
                                        checked={aiAnalysisEnabled}
                                        onChange={(e) => setAiAnalysisEnabled(e.target.checked)}
                                        className="sr-only"
                                    />
                                    <div className={`relative w-12 h-6 rounded-full transition-colors duration-200 ${aiAnalysisEnabled ? 'bg-blue-500' : 'bg-gray-300'}`}>
                                        <div className={`absolute w-5 h-5 bg-white rounded-full shadow-md transition-transform duration-200 top-0.5 ${aiAnalysisEnabled ? 'translate-x-6' : 'translate-x-0.5'}`}></div>
                                    </div>
                                </label>
                                <span className="text-sm text-gray-600">{aiAnalysisEnabled ? 'ON' : 'OFF'}</span>
                                <button
                                    onClick={() => setShowApiSettings(!showApiSettings)}
                                    className="px-3 py-1 bg-gray-200 hover:bg-gray-300 rounded text-xs"
                                >
                                    <i className="fas fa-cog"></i> 設定
                                </button>
                            </div>
                        </div>
                        
                        {showApiSettings && (
                            <div className="mt-3 p-3 bg-gray-50 rounded border">
                                <label className="block text-sm font-medium text-gray-700 mb-2">
                                    OpenAI API キー:
                                </label>
                                <input
                                    type="password"
                                    value={apiKey}
                                    onChange={(e) => setApiKey(e.target.value)}
                                    placeholder="sk-..."
                                    className="w-full p-2 border rounded text-sm"
                                />
                                <p className="text-xs text-gray-500 mt-1">
                                    ※ APIキーはブラウザのローカルストレージに保存されます
                                </p>
                            </div>
                        )}
                    </div>

                    {/* URL追加フォーム */}
                    <div className="mb-6 p-4 bg-white rounded-lg shadow-sm border">
                        <h2 className="text-xl font-semibold mb-4">📌 新しいURLを追加</h2>
                        
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4">
                            <div className="lg:col-span-2">
                                <label className="block text-sm font-medium text-gray-700 mb-1">URL</label>
                                <input
                                    type="url"
                                    value={newUrl}
                                    onChange={(e) => setNewUrl(e.target.value)}
                                    placeholder="https://..."
                                    className="w-full p-2 border rounded"
                                />
                            </div>
                            
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">ジャンル</label>
                                <select
                                    value={selectedGenre}
                                    onChange={(e) => setSelectedGenre(e.target.value)}
                                    className="w-full p-2 border rounded"
                                >
                                    {genres.map(genre => (
                                        <option key={genre} value={genre}>{genre}</option>
                                    ))}
                                </select>
                            </div>
                            
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">優先度 (0-5)</label>
                                <input
                                    type="number"
                                    min="0"
                                    max="5"
                                    value={priority}
                                    onChange={(e) => setPriority(parseInt(e.target.value))}
                                    className="w-full p-2 border rounded"
                                />
                            </div>
                        </div>
                        
                        <div className="mb-4">
                            <label className="block text-sm font-medium text-gray-700 mb-1">コメント（任意）</label>
                            <textarea
                                value={comment}
                                onChange={(e) => setComment(e.target.value)}
                                placeholder="このURLについてのメモ..."
                                className="w-full p-2 border rounded"
                                rows="2"
                            />
                        </div>
                        
                        <button
                            onClick={addUrl}
                            className="w-full bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 transition-colors"
                        >
                            <i className="fas fa-plus mr-2"></i>URLを追加
                        </button>
                    </div>

                    {/* 検索・フィルタ・ソート */}
                    <div className="mb-6 p-4 bg-white rounded-lg shadow-sm border">
                        <h2 className="text-xl font-semibold mb-4">🔍 検索・フィルタ</h2>
                        
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">検索</label>
                                <input
                                    type="text"
                                    value={searchTerm}
                                    onChange={(e) => setSearchTerm(e.target.value)}
                                    placeholder="タイトル、URL、コメントで検索..."
                                    className="w-full p-2 border rounded"
                                />
                            </div>
                            
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">ジャンル</label>
                                <select
                                    value={filterGenre}
                                    onChange={(e) => setFilterGenre(e.target.value)}
                                    className="w-full p-2 border rounded"
                                >
                                    <option value="すべて">すべて</option>
                                    {genres.map(genre => (
                                        <option key={genre} value={genre}>{genre}</option>
                                    ))}
                                </select>
                            </div>
                            
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">優先度</label>
                                <select
                                    value={filterPriority}
                                    onChange={(e) => setFilterPriority(e.target.value)}
                                    className="w-full p-2 border rounded"
                                >
                                    <option value="すべて">すべて</option>
                                    {[0,1,2,3,4,5].map(p => (
                                        <option key={p} value={p.toString()}>{p}</option>
                                    ))}
                                </select>
                            </div>
                            
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">ステータス</label>
                                <select
                                    value={filterStatus}
                                    onChange={(e) => setFilterStatus(e.target.value)}
                                    className="w-full p-2 border rounded"
                                >
                                    <option value="すべて">すべて</option>
                                    <option value="未読">未読</option>
                                    <option value="既読">既読</option>
                                    <option value="お気に入り">お気に入り</option>
                                </select>
                            </div>
                            
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">ソート</label>
                                <select
                                    value={sortBy}
                                    onChange={(e) => setSortBy(e.target.value)}
                                    className="w-full p-2 border rounded"
                                >
                                    <option value="追加順">追加順</option>
                                    <option value="優先度">優先度</option>
                                    <option value="タイトル">タイトル</option>
                                    <option value="ジャンル">ジャンル</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    {/* データ管理 */}
                    <div className="mb-6 p-4 bg-white rounded-lg shadow-sm border">
                        <h2 className="text-xl font-semibold mb-4">💾 データ管理</h2>
                        <div className="flex gap-4">
                            <button
                                onClick={exportData}
                                className="bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600 transition-colors"
                            >
                                <i className="fas fa-download mr-2"></i>エクスポート
                            </button>
                            <button
                                onClick={() => fileInputRef.current?.click()}
                                className="bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 transition-colors"
                            >
                                <i className="fas fa-upload mr-2"></i>インポート
                            </button>
                            <input
                                ref={fileInputRef}
                                type="file"
                                accept=".json"
                                onChange={importData}
                                className="hidden"
                            />
                        </div>
                    </div>

                    {/* 統計情報 */}
                    <div className="mb-6 p-4 bg-white rounded-lg shadow-sm border">
                        <h2 className="text-xl font-semibold mb-4">📊 統計</h2>
                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                            <div>
                                <div className="text-2xl font-bold text-blue-600">{urls.length}</div>
                                <div className="text-sm text-gray-600">総URL数</div>
                            </div>
                            <div>
                                <div className="text-2xl font-bold text-green-600">
                                    {urls.filter(item => item.isRead).length}
                                </div>
                                <div className="text-sm text-gray-600">既読</div>
                            </div>
                            <div>
                                <div className="text-2xl font-bold text-yellow-600">
                                    {urls.filter(item => item.starred).length}
                                </div>
                                <div className="text-sm text-gray-600">お気に入り</div>
                            </div>
                            <div>
                                <div className="text-2xl font-bold text-purple-600">{filteredUrls.length}</div>
                                <div className="text-sm text-gray-600">表示中</div>
                            </div>
                        </div>
                    </div>

                    {/* URLリスト */}
                    <div className="space-y-4">
                        <h2 className="text-xl font-semibold">📋 URLリスト ({filteredUrls.length}件)</h2>
                        
                        {filteredUrls.length === 0 ? (
                            <div className="text-center py-8 text-gray-500">
                                <i className="fas fa-inbox text-4xl mb-4"></i>
                                <p>表示するURLがありません</p>
                                <p className="text-sm">URLを追加するか、フィルタ条件を変更してください</p>
                            </div>
                        ) : (
                            filteredUrls.map((item, index) => (
                                <UrlItem
                                    key={item.id}
                                    item={item}
                                    index={index}
                                    onUpdate={updateUrl}
                                    onDelete={deleteUrl}
                                    onMove={moveUrl}
                                />
                            ))
                        )}
                    </div>
                </div>
            );
        };

        ReactDOM.render(<BookmarkManager />, document.getElementById('root'));
    </script>
</body>
</html>
