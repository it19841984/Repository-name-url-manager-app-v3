<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èª­ã¿ãŸã„ã‚‚ã®ãƒªã‚¹ãƒˆ ğŸ”¥</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback, useMemo } = React;

        const App = () => {
            const [urlItems, setUrlItems] = useState([]);
            const [filterGenre, setFilterGenre] = useState('ã™ã¹ã¦');
            const [readStatusFilter, setReadStatusFilter] = useState('ã™ã¹ã¦');
            const [sortBy, setSortBy] = useState('created');
            const [sortDirection, setSortDirection] = useState('desc');
            const [searchQuery, setSearchQuery] = useState('');

            // ğŸ‰ æ–°æ©Ÿèƒ½: ãƒ¦ãƒ¼ã‚¶ãƒ¼IDç”Ÿæˆãƒ»å–å¾—
            const getUserId = useCallback(() => {
                let userId = localStorage.getItem('userId');
                if (!userId) {
                    userId = 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                    localStorage.setItem('userId', userId);
                }
                return userId;
            }, []);

            // ğŸš€ æ–°æ©Ÿèƒ½: è©³ç´°URLãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å–å¾—ï¼ˆé«˜ç²¾åº¦ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ï¼‰
            const fetchDetailedMetadata = useCallback(async (url) => {
                try {
                    const urlObj = new URL(url);
                    const domain = urlObj.hostname.toLowerCase();
                    const path = urlObj.pathname.toLowerCase();
                    const params = urlObj.searchParams;
                    
                    let title = '';
                    let thumbnail = '';
                    let description = '';
                    let pageType = '';
                    
                    // YouTubeè©³ç´°è§£æ
                    if (domain.includes('youtube.com') || domain.includes('youtu.be')) {
                        thumbnail = 'ğŸ¥';
                        pageType = 'video';
                        if (params.get('v') || path.includes('/watch')) {
                            title = 'YouTubeå‹•ç”»';
                            description = 'å‹•ç”»ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã€‚ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒ¡ãƒ³ãƒˆã€æ•™è‚²ã€æƒ…å ±ãªã©æ§˜ã€…ãªã‚¸ãƒ£ãƒ³ãƒ«ã®å‹•ç”»ãŒè¦–è´ã§ãã¾ã™ã€‚';
                        } else if (path.includes('/channel') || path.includes('/c/') || path.includes('/@')) {
                            title = 'YouTubeãƒãƒ£ãƒ³ãƒãƒ«';
                            description = 'YouTubeãƒãƒ£ãƒ³ãƒãƒ«ãƒšãƒ¼ã‚¸ã€‚ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ã®å‹•ç”»ä¸€è¦§ã‚„æƒ…å ±ã‚’ç¢ºèªã§ãã¾ã™ã€‚';
                        } else if (path.includes('/playlist')) {
                            title = 'YouTubeå†ç”Ÿãƒªã‚¹ãƒˆ';
                            description = 'å‹•ç”»ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆã€‚ãƒ†ãƒ¼ãƒåˆ¥ã«ã¾ã¨ã‚ã‚‰ã‚ŒãŸå‹•ç”»ã‚·ãƒªãƒ¼ã‚ºã‚’é€£ç¶šè¦–è´ã§ãã¾ã™ã€‚';
                        }
                    }
                    
                    // GitHubè©³ç´°è§£æ
                    else if (domain.includes('github.com')) {
                        thumbnail = 'ğŸ’»';
                        pageType = 'repository';
                        const pathParts = path.split('/').filter(p => p);
                        if (pathParts.length >= 2) {
                            const repo = pathParts[1];
                            title = `GitHub: ${repo}`;
                            if (path.includes('/issues')) {
                                description = 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®èª²é¡Œãƒ»ãƒã‚°å ±å‘Šãƒ»æ©Ÿèƒ½è¦æœ›ãªã©ãŒè­°è«–ã•ã‚Œã¦ã„ã‚‹ãƒšãƒ¼ã‚¸ã§ã™ã€‚é–‹ç™ºã®é€²æ—ã‚’æŠŠæ¡ã§ãã¾ã™ã€‚';
                            } else if (path.includes('/pull')) {
                                description = 'ã‚³ãƒ¼ãƒ‰ã®å¤‰æ›´ææ¡ˆãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒšãƒ¼ã‚¸ã€‚é–‹ç™ºè€…åŒå£«ã®ã‚³ãƒ¼ãƒ‰æ”¹å–„ææ¡ˆã‚’ç¢ºèªã§ãã¾ã™ã€‚';
                            } else if (path.includes('/wiki')) {
                                description = 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ»èª¬æ˜æ›¸ã€‚ä½¿ã„æ–¹ã‚„ä»•æ§˜ã«ã¤ã„ã¦è©³ã—ã„æƒ…å ±ãŒã‚ã‚Šã¾ã™ã€‚';
                            } else if (path.includes('/releases')) {
                                description = 'ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³å±¥æ­´ãƒ»ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸ã€‚æœ€æ–°ç‰ˆã‚„éå»ç‰ˆã®æƒ…å ±ãŒã‚ã‚Šã¾ã™ã€‚';
                            } else {
                                description = 'ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã€‚å­¦ç¿’ãƒ»å‚è€ƒãƒ»ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã«æ´»ç”¨ã§ãã¾ã™ã€‚';
                            }
                        }
                    }
                    
                    // Qiitaè©³ç´°è§£æ
                    else if (domain.includes('qiita.com')) {
                        thumbnail = 'ğŸ“';
                        pageType = 'article';
                        if (path.includes('/items/')) {
                            title = 'QiitaæŠ€è¡“è¨˜äº‹';
                            description = 'ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãƒ»ITæŠ€è¡“ã«é–¢ã™ã‚‹è©³ç´°ãªè§£èª¬è¨˜äº‹ã€‚ã‚³ãƒ¼ãƒ‰ä¾‹ã‚„å®Ÿè£…æ–¹æ³•ãŒå­¦ã¹ã¾ã™ã€‚';
                        } else if (path.includes('/organizations/')) {
                            title = 'Qiitaçµ„ç¹”ãƒšãƒ¼ã‚¸';
                            description = 'ä¼æ¥­ãƒ»å›£ä½“ã®æŠ€è¡“è¨˜äº‹ã¾ã¨ã‚ã€‚çµ„ç¹”ã®æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã‚„çŸ¥è¦‹ã‚’ç¢ºèªã§ãã¾ã™ã€‚';
                        } else {
                            title = 'Qiitaè¨˜äº‹';
                            description = 'æŠ€è¡“è€…å‘ã‘ã®çŸ¥è­˜å…±æœ‰è¨˜äº‹ã€‚ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚„ITé–¢é€£ã®æƒ…å ±ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚';
                        }
                    }
                    
                    // Note.comè©³ç´°è§£æ
                    else if (domain.includes('note.com')) {
                        thumbnail = 'âœï¸';
                        pageType = 'blog';
                        title = 'Noteè¨˜äº‹';
                        if (path.includes('/magazine/')) {
                            description = 'ãƒã‚¬ã‚¸ãƒ³è¨˜äº‹ã€‚ç‰¹å®šãƒ†ãƒ¼ãƒã«ã¤ã„ã¦ç¶™ç¶šçš„ã«ç™ºä¿¡ã•ã‚Œã‚‹è¨˜äº‹ã‚·ãƒªãƒ¼ã‚ºã§ã™ã€‚';
                        } else {
                            description = 'å€‹äººãƒ»ä¼æ¥­ã®ä½“é¨“è«‡ã€çŸ¥è¦‹ã€ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ãªå†…å®¹ã€‚å¤šæ§˜ãªè¦–ç‚¹ã®æƒ…å ±ãŒèª­ã‚ã¾ã™ã€‚';
                        }
                    }
                    
                    // Mediumè©³ç´°è§£æ
                    else if (domain.includes('medium.com')) {
                        thumbnail = 'ğŸ“–';
                        pageType = 'blog';
                        title = 'Mediumè¨˜äº‹';
                        description = 'è³ªã®é«˜ã„ãƒ–ãƒ­ã‚°è¨˜äº‹ã€‚ãƒ“ã‚¸ãƒã‚¹ã€æŠ€è¡“ã€ãƒ©ã‚¤ãƒ•ã‚¹ã‚¿ã‚¤ãƒ«ãªã©å¹…åºƒã„ãƒˆãƒ”ãƒƒã‚¯ã®æ·±ã„æ´å¯ŸãŒã‚ã‚Šã¾ã™ã€‚';
                    }
                    
                    // Twitter/Xè©³ç´°è§£æ
                    else if (domain.includes('twitter.com') || domain.includes('x.com')) {
                        thumbnail = 'ğŸ¦';
                        pageType = 'social';
                        if (path.includes('/status/')) {
                            title = 'TwitteræŠ•ç¨¿';
                            description = 'å€‹åˆ¥ãƒ„ã‚¤ãƒ¼ãƒˆã€‚ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®æƒ…å ±ã€æ„è¦‹ã€ãƒ‹ãƒ¥ãƒ¼ã‚¹ã®åå¿œãªã©ã‚’ç¢ºèªã§ãã¾ã™ã€‚';
                        } else {
                            title = 'Twitterãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«';
                            description = 'ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒšãƒ¼ã‚¸ã€‚æŠ•ç¨¿å±¥æ­´ã€ãƒ•ã‚©ãƒ­ãƒ¼é–¢ä¿‚ã€ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã‚’ç¢ºèªã§ãã¾ã™ã€‚';
                        }
                    }
                    
                    // Amazonè©³ç´°è§£æ
                    else if (domain.includes('amazon.co.jp') || domain.includes('amazon.com')) {
                        thumbnail = 'ğŸ›’';
                        pageType = 'ecommerce';
                        if (path.includes('/dp/')) {
                            title = 'Amazonå•†å“ãƒšãƒ¼ã‚¸';
                            description = 'å•†å“ã®è©³ç´°æƒ…å ±ã€ä¾¡æ ¼ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€åœ¨åº«çŠ¶æ³ã€‚è³¼å…¥æ¤œè¨ã‚„æ¯”è¼ƒã«å½¹ç«‹ã¤æƒ…å ±ãŒã‚ã‚Šã¾ã™ã€‚';
                        } else if (path.includes('/s?')) {
                            title = 'Amazonæ¤œç´¢çµæœ';
                            description = 'å•†å“æ¤œç´¢çµæœä¸€è¦§ã€‚æ¡ä»¶ã«åˆã£ãŸå•†å“ã®æ¯”è¼ƒãƒ»é¸æŠãŒã§ãã¾ã™ã€‚';
                        } else {
                            title = 'Amazonãƒšãƒ¼ã‚¸';
                            description = 'ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°é–¢é€£ãƒšãƒ¼ã‚¸ã€‚å•†å“æƒ…å ±ã‚„è³¼å…¥ã«é–¢ã™ã‚‹å†…å®¹ã§ã™ã€‚';
                        }
                    }
                    
                    // Wikipediaè©³ç´°è§£æ
                    else if (domain.includes('wikipedia.org')) {
                        thumbnail = 'ğŸ“š';
                        pageType = 'encyclopedia';
                        const pathParts = path.split('/');
                        if (pathParts.includes('wiki')) {
                            title = 'Wikipediaè¨˜äº‹';
                            description = 'ä¿¡é ¼æ€§ã®é«˜ã„ç™¾ç§‘äº‹å…¸è¨˜äº‹ã€‚æ­´å²ã€ç§‘å­¦ã€æ–‡åŒ–ãªã©å¹…åºƒã„ãƒˆãƒ”ãƒƒã‚¯ã®è©³ç´°ãªæƒ…å ±ãŒã‚ã‚Šã¾ã™ã€‚';
                        }
                    }
                    
                    // ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚µã‚¤ãƒˆè©³ç´°è§£æ
                    else if (domain.includes('nikkei.com')) {
                        thumbnail = 'ğŸ“°';
                        pageType = 'news';
                        title = 'æ—¥çµŒãƒ‹ãƒ¥ãƒ¼ã‚¹';
                        description = 'çµŒæ¸ˆãƒ»ãƒ“ã‚¸ãƒã‚¹ãƒ»æŠ€è¡“ã«é–¢ã™ã‚‹æœ€æ–°ãƒ‹ãƒ¥ãƒ¼ã‚¹ã€‚å¸‚å ´å‹•å‘ã‚„ä¼æ¥­æƒ…å ±ã‚’æŠŠæ¡ã§ãã¾ã™ã€‚';
                    } else if (domain.includes('asahi.com')) {
                        thumbnail = 'ğŸ“°';
                        pageType = 'news';
                        title = 'æœæ—¥æ–°èè¨˜äº‹';
                        description = 'ç¤¾ä¼šãƒ»æ”¿æ²»ãƒ»å›½éš›æƒ…å‹¢ã®æœ€æ–°ãƒ‹ãƒ¥ãƒ¼ã‚¹ã€‚æ™‚äº‹å•é¡Œã‚„ç¤¾ä¼šå‹•å‘ã‚’ç†è§£ã§ãã¾ã™ã€‚';
                    } else if (domain.includes('news') || domain.includes('mainichi')) {
                        thumbnail = 'ğŸ“°';
                        pageType = 'news';
                        title = 'ãƒ‹ãƒ¥ãƒ¼ã‚¹è¨˜äº‹';
                        description = 'æœ€æ–°ã®æ™‚äº‹æƒ…å ±ãƒ»ç¤¾ä¼šæƒ…å‹¢ã€‚æ”¿æ²»ã€çµŒæ¸ˆã€ç¤¾ä¼šã®å‹•å‘ã‚’æŠŠæ¡ã§ãã¾ã™ã€‚';
                    }
                    
                    // Stack Overflowè©³ç´°è§£æ
                    else if (domain.includes('stackoverflow.com')) {
                        thumbnail = 'â“';
                        pageType = 'qa';
                        title = 'Stack Overflow';
                        if (path.includes('/questions/')) {
                            description = 'ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®è³ªå•ã¨å›ç­”ã€‚å…·ä½“çš„ãªæŠ€è¡“çš„å•é¡Œã®è§£æ±ºæ–¹æ³•ãŒè¦‹ã¤ã‹ã‚Šã¾ã™ã€‚';
                        } else {
                            description = 'ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼å‘ã‘Q&Aã‚µã‚¤ãƒˆã€‚æŠ€è¡“çš„ãªç–‘å•è§£æ±ºã‚„çŸ¥è­˜å…±æœ‰ã®å ´ã§ã™ã€‚';
                        }
                    }
                    
                    // ãã®ä»–ã®ã‚µã‚¤ãƒˆï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ™ãƒ¼ã‚¹æ¨æ¸¬ï¼‰
                    else {
                        thumbnail = 'ğŸŒ';
                        pageType = 'general';
                        title = `${domain}ã®ãƒšãƒ¼ã‚¸`;
                        
                        // ãƒ‘ã‚¹ã‚„ãƒ‰ãƒ¡ã‚¤ãƒ³ã‹ã‚‰å†…å®¹ã‚’æ¨æ¸¬
                        if (domain.includes('blog') || path.includes('blog')) {
                            description = 'ãƒ–ãƒ­ã‚°è¨˜äº‹ã€‚å€‹äººã‚„ä¼æ¥­ã®ä½“é¨“è«‡ã€çŸ¥è¦‹ã€æƒ…å ±ç™ºä¿¡ã‚’èª­ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚';
                        } else if (domain.includes('docs') || path.includes('docs')) {
                            description = 'ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒšãƒ¼ã‚¸ã€‚è£½å“ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ã®ä½¿ã„æ–¹ã‚„æŠ€è¡“ä»•æ§˜ã«ã¤ã„ã¦è©³ã—ãè§£èª¬ã•ã‚Œã¦ã„ã¾ã™ã€‚';
                        } else if (domain.includes('api') || path.includes('api')) {
                            description = 'APIä»•æ§˜æ›¸ãƒ»é–‹ç™ºè€…å‘ã‘ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€‚ã‚·ã‚¹ãƒ†ãƒ é€£æºã‚„é–‹ç™ºã«å¿…è¦ãªæŠ€è¡“æƒ…å ±ãŒã‚ã‚Šã¾ã™ã€‚';
                        } else if (path.includes('tutorial') || path.includes('guide')) {
                            description = 'ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ãƒ»ã‚¬ã‚¤ãƒ‰ã€‚æ®µéšçš„ãªå­¦ç¿’ã‚„æ“ä½œæ–¹æ³•ã‚’ç¿’å¾—ã§ãã¾ã™ã€‚';
                        } else if (path.includes('about') || path.includes('company')) {
                            description = 'ä¼æ¥­æƒ…å ±ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ç´¹ä»‹ãƒšãƒ¼ã‚¸ã€‚çµ„ç¹”ã®æ¦‚è¦ã€ç†å¿µã€ã‚µãƒ¼ãƒ“ã‚¹å†…å®¹ã‚’ç¢ºèªã§ãã¾ã™ã€‚';
                        } else {
                            description = 'Webãƒšãƒ¼ã‚¸ã€‚æœ‰ç›Šãªæƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚æ™‚é–“ã®ã‚ã‚‹ã¨ãã«å†…å®¹ã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚';
                        }
                    }
                    
                    return { title, thumbnail, domain, description, pageType };
                } catch (error) {
                    return { 
                        title: 'Webãƒšãƒ¼ã‚¸', 
                        thumbnail: 'ğŸŒ', 
                        domain: '', 
                        description: 'ãƒšãƒ¼ã‚¸ã®è©³ç´°ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸãŒã€æœ‰ç›Šãªæƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚',
                        pageType: 'general'
                    };
                }
            }, []);

            // ğŸ¤– æ–°æ©Ÿèƒ½: é«˜ç²¾åº¦AIè¦ç´„ç”Ÿæˆï¼ˆãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼‰
            const generateIntelligentSummary = useCallback(async (url, metadata) => {
                try {
                    const urlLower = url.toLowerCase();
                    const titleLower = (metadata.title || '').toLowerCase();
                    const domain = metadata.domain || '';
                    const pageType = metadata.pageType || 'general';
                    
                    let summary = '';
                    
                    // ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒ—åˆ¥ã®é«˜ç²¾åº¦è¦ç´„ç”Ÿæˆ
                    switch (pageType) {
                        case 'video':
                            if (titleLower.includes('tutorial') || titleLower.includes('how to') || titleLower.includes('ä½¿ã„æ–¹')) {
                                summary = 'å­¦ç¿’å‹•ç”»ã§ã™ã€‚æ–°ã—ã„ã‚¹ã‚­ãƒ«ã‚„çŸ¥è­˜ã‚’è¦–è¦šçš„ã«å­¦ã¹ã¾ã™ã€‚æ‰‹é †ã‚„ã‚³ãƒ„ã‚’å‹•ç”»ã§ç¢ºèªã—ãªãŒã‚‰å®Ÿè·µã§ãã¾ã™ã€‚';
                            } else if (titleLower.includes('review') || titleLower.includes('ãƒ¬ãƒ“ãƒ¥ãƒ¼')) {
                                summary = 'å•†å“ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼å‹•ç”»ã€‚å®Ÿéš›ã®ä½¿ç”¨æ„Ÿã‚„è©•ä¾¡ã‚’å‹•ç”»ã§è©³ã—ãç¢ºèªã§ãã¾ã™ã€‚';
                            } else if (titleLower.includes('news') || titleLower.includes('ãƒ‹ãƒ¥ãƒ¼ã‚¹')) {
                                summary = 'å‹•ç”»ãƒ‹ãƒ¥ãƒ¼ã‚¹ã€‚æœ€æ–°ã®å‡ºæ¥äº‹ã‚„è©±é¡Œã‚’æ˜ åƒã¨éŸ³å£°ã§åˆ†ã‹ã‚Šã‚„ã™ãç†è§£ã§ãã¾ã™ã€‚';
                            } else {
                                summary = 'å‹•ç”»ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã€‚è¦–è´ã—ã¦æƒ…å ±åé›†ã€å­¦ç¿’ã€ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒ¡ãƒ³ãƒˆã‚’æ¥½ã—ã‚ã¾ã™ã€‚';
                            }
                            break;
                            
                        case 'repository':
                            if (titleLower.includes('react') || titleLower.includes('vue') || titleLower.includes('angular')) {
                                summary = 'ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€‚UI/UXé–‹ç™ºã®å‚è€ƒã«ãªã‚‹ã‚³ãƒ¼ãƒ‰ã‚„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ç¢ºèªã§ãã¾ã™ã€‚';
                            } else if (titleLower.includes('python') || titleLower.includes('machine learning') || titleLower.includes('ai')) {
                                summary = 'Pythonãƒ»AI/MLé–¢é€£ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€‚ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹ã‚„æ©Ÿæ¢°å­¦ç¿’ã®å®Ÿè£…ä¾‹ã‚’å­¦ç¿’ã§ãã¾ã™ã€‚';
                            } else if (titleLower.includes('api') || titleLower.includes('backend')) {
                                summary = 'ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ»APIé–‹ç™ºãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€‚ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã®è¨­è¨ˆã‚„å®Ÿè£…æ–¹æ³•ã‚’å‚è€ƒã«ã§ãã¾ã™ã€‚';
                            } else {
                                summary = 'ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€‚ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®å­¦ç¿’ã€æ©Ÿèƒ½å®Ÿè£…ã®å‚è€ƒã€ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã«æ´»ç”¨ã§ãã¾ã™ã€‚';
                            }
                            break;
                            
                        case 'article':
                            if (titleLower.includes('å…¥é–€') || titleLower.includes('beginner') || titleLower.includes('tutorial')) {
                                summary = 'åˆå¿ƒè€…å‘ã‘æŠ€è¡“è¨˜äº‹ã€‚åŸºç¤ã‹ã‚‰åˆ†ã‹ã‚Šã‚„ã™ãè§£èª¬ã•ã‚ŒãŸå­¦ç¿’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã§ã™ã€‚';
                            } else if (titleLower.includes('æ¯”è¼ƒ') || titleLower.includes('vs') || titleLower.includes('comparison')) {
                                summary = 'æŠ€è¡“æ¯”è¼ƒè¨˜äº‹ã€‚è¤‡æ•°ã®é¸æŠè‚¢ã‚’æ¯”è¼ƒæ¤œè¨ã™ã‚‹éš›ã®åˆ¤æ–­ææ–™ã«ãªã‚‹è©³ç´°ãªåˆ†æãŒã‚ã‚Šã¾ã™ã€‚';
                            } else if (titleLower.includes('å®Ÿè£…') || titleLower.includes('implementation')) {
                                summary = 'å®Ÿè£…è§£èª¬è¨˜äº‹ã€‚å…·ä½“çš„ãªã‚³ãƒ¼ãƒ‰ä¾‹ã¨å…±ã«æŠ€è¡“ã®å®Ÿè£…æ–¹æ³•ãŒè©³ã—ãèª¬æ˜ã•ã‚Œã¦ã„ã¾ã™ã€‚';
                            } else {
                                summary = 'æŠ€è¡“è¨˜äº‹ã€‚ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚„ITåˆ†é‡ã®çŸ¥è­˜ãƒ»çµŒé¨“ãŒå…±æœ‰ã•ã‚ŒãŸå®Ÿç”¨çš„ãªæƒ…å ±ã§ã™ã€‚';
                            }
                            break;
                            
                        case 'news':
                            if (domain.includes('nikkei')) {
                                summary = 'çµŒæ¸ˆãƒ»ãƒ“ã‚¸ãƒã‚¹ãƒ‹ãƒ¥ãƒ¼ã‚¹ã€‚å¸‚å ´å‹•å‘ã€ä¼æ¥­æƒ…å ±ã€æŠ•è³‡åˆ¤æ–­ã«é–¢ã‚ã‚‹é‡è¦ãªæƒ…å ±ã‚’å¾—ã‚‰ã‚Œã¾ã™ã€‚';
                            } else if (titleLower.includes('tech') || titleLower.includes('æŠ€è¡“')) {
                                summary = 'ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ãƒ‹ãƒ¥ãƒ¼ã‚¹ã€‚ITæ¥­ç•Œã®æœ€æ–°å‹•å‘ã€æ–°æŠ€è¡“ã€ä¼æ¥­ã®æŠ€è¡“æˆ¦ç•¥ã«ã¤ã„ã¦å ±ã˜ã¦ã„ã¾ã™ã€‚';
                            } else {
                                summary = 'æœ€æ–°ãƒ‹ãƒ¥ãƒ¼ã‚¹ã€‚ç¤¾ä¼šæƒ…å‹¢ã€æ”¿æ²»ã€çµŒæ¸ˆã®å‹•å‘ã‚’æŠŠæ¡ã—ã€æƒ…å ±åé›†ã«å½¹ç«‹ã¦ã‚‰ã‚Œã¾ã™ã€‚';
                            }
                            break;
                            
                        case 'ecommerce':
                            if (titleLower.includes('book') || titleLower.includes('æœ¬')) {
                                summary = 'æ›¸ç±ã®å•†å“ãƒšãƒ¼ã‚¸ã€‚å†…å®¹ç´¹ä»‹ã€èª­è€…ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€ä¾¡æ ¼æ¯”è¼ƒã§è³¼å…¥æ¤œè¨ã§ãã¾ã™ã€‚';
                            } else if (titleLower.includes('electronic') || titleLower.includes('gadget')) {
                                summary = 'é›»å­æ©Ÿå™¨ãƒ»ã‚¬ã‚¸ã‚§ãƒƒãƒˆã®å•†å“ãƒšãƒ¼ã‚¸ã€‚ä»•æ§˜ã€æ©Ÿèƒ½ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§è£½å“ã‚’è©³ã—ãè©•ä¾¡ã§ãã¾ã™ã€‚';
                            } else {
                                summary = 'å•†å“æƒ…å ±ãƒšãƒ¼ã‚¸ã€‚ä¾¡æ ¼ã€ä»•æ§˜ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ç¢ºèªã—ã¦è³¼å…¥ã®æ„æ€æ±ºå®šã«æ´»ç”¨ã§ãã¾ã™ã€‚';
                            }
                            break;
                            
                        default:
                            // URLãƒ‘ã‚¿ãƒ¼ãƒ³ã‚„ã‚¿ã‚¤ãƒˆãƒ«ã‹ã‚‰å†…å®¹ã‚’æ¨æ¸¬
                            if (titleLower.includes('tutorial') || titleLower.includes('how to') || titleLower.includes('guide')) {
                                summary = 'å­¦ç¿’ã‚¬ã‚¤ãƒ‰ã€‚ã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—ã§æ–°ã—ã„ã‚¹ã‚­ãƒ«ã‚„çŸ¥è­˜ã‚’èº«ã«ã¤ã‘ã‚‰ã‚Œã¾ã™ã€‚';
                            } else if (titleLower.includes('best') || titleLower.includes('top') || titleLower.includes('ãŠã™ã™ã‚')) {
                                summary = 'ãŠã™ã™ã‚ãƒ»ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¨˜äº‹ã€‚é¸æŠè‚¢ã‚’æ¯”è¼ƒæ¤œè¨ã™ã‚‹éš›ã®å‚è€ƒæƒ…å ±ãŒæ•´ç†ã•ã‚Œã¦ã„ã¾ã™ã€‚';
                            } else if (titleLower.includes('tips') || titleLower.includes('ã‚³ãƒ„') || titleLower.includes('ãƒ’ãƒ³ãƒˆ')) {
                                summary = 'å®Ÿç”¨çš„ãªãƒ’ãƒ³ãƒˆé›†ã€‚åŠ¹ç‡åŒ–ã‚„æ”¹å–„ã®ãŸã‚ã®å…·ä½“çš„ãªã‚¢ãƒ‰ãƒã‚¤ã‚¹ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚';
                            } else if (urlLower.includes('blog') || urlLower.includes('article')) {
                                summary = 'ãƒ–ãƒ­ã‚°è¨˜äº‹ã€‚å€‹äººã‚„ä¼æ¥­ã®ä½“é¨“è«‡ã€çŸ¥è¦‹ã€å°‚é–€çš„ãªæƒ…å ±ãŒå…±æœ‰ã•ã‚Œã¦ã„ã¾ã™ã€‚';
                            } else {
                                summary = metadata.description || 'æœ‰ç›Šãªæƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã‚‹Webãƒšãƒ¼ã‚¸ã§ã™ã€‚æ™‚é–“ã®ã‚ã‚‹ã¨ãã«å†…å®¹ã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚';
                            }
                    }
                    
                    // 120æ–‡å­—ä»¥å†…ã«åˆ¶é™
                    if (summary.length > 120) {
                        summary = summary.substring(0, 117) + '...';
                    }
                    
                    return summary;
                } catch (error) {
                    return 'ã“ã®ãƒšãƒ¼ã‚¸ã«ã¯æœ‰ç›Šãªæƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚';
                }
            }, []);

            // ğŸ¤– æ–°æ©Ÿèƒ½: è‡ªå‹•ã‚¸ãƒ£ãƒ³ãƒ«åˆ†é¡ï¼ˆæ”¹è‰¯ç‰ˆï¼‰
            const classifyGenre = useCallback((url, metadata) => {
                const urlLower = url.toLowerCase();
                const titleLower = (metadata.title || '').toLowerCase();
                const pageType = metadata.pageType || 'general';
                const combined = (urlLower + ' ' + titleLower).toLowerCase();
                
                // ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒ—ãƒ™ãƒ¼ã‚¹ã®åˆ†é¡
                if (pageType === 'repository' || pageType === 'qa') {
                    return 'æŠ€è¡“ãƒ»ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°';
                } else if (pageType === 'video') {
                    if (combined.includes('tutorial') || combined.includes('learning') || combined.includes('course')) {
                        return 'æ•™è‚²ãƒ»å­¦ç¿’';
                    } else {
                        return 'ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒ¡ãƒ³ãƒˆ';
                    }
                } else if (pageType === 'news') {
                    return 'ãƒ‹ãƒ¥ãƒ¼ã‚¹';
                } else if (pageType === 'ecommerce') {
                    return 'ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°';
                } else if (pageType === 'blog' || pageType === 'article') {
                    // ãƒ–ãƒ­ã‚°ãƒ»è¨˜äº‹ã®è©³ç´°åˆ†é¡
                    if (combined.includes('business') || combined.includes('marketing') || combined.includes('startup') ||
                        combined.includes('ãƒ“ã‚¸ãƒã‚¹') || combined.includes('çµŒå–¶') || combined.includes('èµ·æ¥­')) {
                        return 'ãƒ“ã‚¸ãƒã‚¹';
                    } else if (combined.includes('tech') || combined.includes('programming') || combined.includes('code') ||
                               combined.includes('æŠ€è¡“') || combined.includes('ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°') || combined.includes('é–‹ç™º')) {
                        return 'æŠ€è¡“ãƒ»ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°';
                    } else {
                        return 'ãƒ–ãƒ­ã‚°ãƒ»è¨˜äº‹';
                    }
                }
                
                // ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®è©³ç´°åˆ†é¡
                if (combined.includes('github') || combined.includes('qiita') || combined.includes('stack') || 
                    combined.includes('programming') || combined.includes('code') || combined.includes('tech') ||
                    combined.includes('javascript') || combined.includes('python') || combined.includes('react') ||
                    combined.includes('ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°') || combined.includes('æŠ€è¡“') || combined.includes('é–‹ç™º') ||
                    combined.includes('ã‚³ãƒ¼ãƒ‰') || combined.includes('api') || combined.includes('framework')) {
                    return 'æŠ€è¡“ãƒ»ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°';
                }
                
                if (combined.includes('wikipedia') || combined.includes('coursera') || combined.includes('udemy') || 
                    combined.includes('education') || combined.includes('learn') || combined.includes('study') ||
                    combined.includes('æ•™è‚²') || combined.includes('å­¦ç¿’') || combined.includes('å‹‰å¼·') ||
                    combined.includes('è¬›åº§') || combined.includes('tutorial')) {
                    return 'æ•™è‚²ãƒ»å­¦ç¿’';
                }
                
                if (combined.includes('business') || combined.includes('marketing') || combined.includes('startup') || 
                    combined.includes('finance') || combined.includes('investment') || combined.includes('economy') ||
                    combined.includes('ãƒ“ã‚¸ãƒã‚¹') || combined.includes('ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°') || combined.includes('æŠ•è³‡') ||
                    combined.includes('çµŒæ¸ˆ') || combined.includes('é‡‘è') || combined.includes('èµ·æ¥­')) {
                    return 'ãƒ“ã‚¸ãƒã‚¹';
                }
                
                return 'æœªåˆ†é¡';
            }, []);

            // LocalStorageã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ï¼ˆæ–°æ©Ÿèƒ½å¯¾å¿œï¼‰
            useEffect(() => {
                try {
                    const userData = localStorage.getItem('userData');
                    if (userData) {
                        const data = JSON.parse(userData);
                        if (data.urlItems && Array.isArray(data.urlItems)) {
                            const migratedItems = data.urlItems.map(item => ({
                                ...item,
                                comment: item.comment || '',
                                title: item.title || '',
                                thumbnail: item.thumbnail || 'ğŸŒ',
                                domain: item.domain || '',
                                aiSummary: item.aiSummary || ''
                            }));
                            setUrlItems(migratedItems.filter(item => item.url));
                            return;
                        }
                    }

                    const storedItems = localStorage.getItem('urlItems');
                    if (storedItems) {
                        const parsedItems = JSON.parse(storedItems);
                        const migratedItems = parsedItems.map(item => ({
                            id: item.id || new Date().toISOString(),
                            url: item.url || '',
                            isRead: item.isRead || false,
                            rating: item.rating || 0,
                            priority: item.priority || 0,
                            genre: item.genre || 'æœªåˆ†é¡',
                            createdAt: item.createdAt || new Date().toISOString(),
                            comment: item.comment || '',
                            title: item.title || '',
                            thumbnail: item.thumbnail || 'ğŸŒ',
                            domain: item.domain || '',
                            aiSummary: item.aiSummary || ''
                        }));
                        setUrlItems(migratedItems.filter(item => item.url));
                    }
                } catch (error) {
                    console.error("Failed to load items from localStorage", error);
                }
            }, []);

            // LocalStorageã«ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ï¼ˆæ–°æ©Ÿèƒ½å¯¾å¿œï¼‰
            useEffect(() => {
                try {
                    const userId = getUserId();
                    const userData = {
                        userId: userId,
                        urlItems: urlItems,
                        lastModified: new Date().toISOString(),
                        appVersion: '2.4' // ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—
                    };
                    
                    localStorage.setItem('userData', JSON.stringify(userData));
                    localStorage.setItem('urlItems', JSON.stringify(urlItems));
                } catch (error) {
                    console.error("Failed to save items to localStorage", error);
                }
            }, [urlItems, getUserId]);

            // ğŸ‰ æ–°æ©Ÿèƒ½: ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½
            const exportData = useCallback(() => {
                const userId = getUserId();
                const exportData = {
                    userId: userId,
                    urlItems: urlItems,
                    exportDate: new Date().toISOString(),
                    appVersion: '2.4',
                    totalItems: urlItems.length
                };
                
                const dataStr = JSON.stringify(exportData, null, 2);
                const dataBlob = new Blob([dataStr], {type: 'application/json'});
                
                const link = document.createElement('a');
                link.href = URL.createObjectURL(dataBlob);
                link.download = `website-list-${userId.substr(-8)}-${new Date().toISOString().substr(0,10)}.json`;
                link.click();
                
                alert(`${urlItems.length}ä»¶ã®Webã‚µã‚¤ãƒˆã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸï¼`);
            }, [urlItems, getUserId]);

            // ğŸ‰ æ–°æ©Ÿèƒ½: ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ©Ÿèƒ½
            const importData = useCallback((event) => {
                const file = event.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const importedData = JSON.parse(e.target.result);
                        
                        if (importedData.urlItems && Array.isArray(importedData.urlItems)) {
                            const confirmMessage = `${importedData.urlItems.length}ä»¶ã®Webã‚µã‚¤ãƒˆã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™ã‹ï¼Ÿ\nç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ã¯ä¸Šæ›¸ãã•ã‚Œã¾ã™ã€‚`;
                            
                            if (confirm(confirmMessage)) {
                                const migratedItems = importedData.urlItems.map(item => ({
                                    ...item,
                                    comment: item.comment || '',
                                    title: item.title || '',
                                    thumbnail: item.thumbnail || 'ğŸŒ',
                                    domain: item.domain || '',
                                    aiSummary: item.aiSummary || ''
                                }));
                                setUrlItems(migratedItems);
                                alert('ãƒ‡ãƒ¼ã‚¿ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãŒå®Œäº†ã—ã¾ã—ãŸï¼');
                            }
                        } else {
                            alert('ç„¡åŠ¹ãªãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã§ã™ã€‚');
                        }
                    } catch (error) {
                        alert('ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
                        console.error('Import error:', error);
                    }
                };
                reader.readAsText(file);
                event.target.value = '';
            }, []);

            // ğŸ‰ æ–°æ©Ÿèƒ½: å…¨ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªã‚¢
            const clearAllData = useCallback(() => {
                if (confirm('æœ¬å½“ã«å…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ\nã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚')) {
                    if (confirm('æœ€çµ‚ç¢ºèªï¼šå…¨ã¦ã®Webã‚µã‚¤ãƒˆæƒ…å ±ãŒå‰Šé™¤ã•ã‚Œã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ')) {
                        setUrlItems([]);
                        alert('å…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿ãŒå‰Šé™¤ã•ã‚Œã¾ã—ãŸã€‚');
                    }
                }
            }, []);

            // ğŸ¤– ä¿®æ­£: é«˜ç²¾åº¦ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å–å¾—ã€è‡ªå‹•åˆ†é¡ã€AIè¦ç´„ã«å¯¾å¿œã—ãŸURLè¿½åŠ æ©Ÿèƒ½
            const addUrlItem = useCallback(async (url, genre, priority = 0, comment = '', useAutoClassify = false, useAISummary = false) => {
                if (url && !urlItems.some(item => item.url === url)) {
                    try {
                        // è©³ç´°ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
                        const metadata = await fetchDetailedMetadata(url);
                        
                        // è‡ªå‹•åˆ†é¡ãŒæœ‰åŠ¹ãªå ´åˆã¯ã€ã‚¸ãƒ£ãƒ³ãƒ«ã‚’è‡ªå‹•åˆ¤å®š
                        const finalGenre = useAutoClassify ? classifyGenre(url, metadata) : genre;
                        
                        // AIè¦ç´„ãŒæœ‰åŠ¹ãªå ´åˆã¯ã€é«˜ç²¾åº¦è¦ç´„ã‚’ç”Ÿæˆ
                        const aiSummary = useAISummary ? await generateIntelligentSummary(url, metadata) : '';
                        
                        const newItem = {
                            id: new Date().toISOString() + '_' + Math.random().toString(36).substr(2, 9),
                            url,
                            genre: finalGenre,
                            comment,
                            isRead: false,
                            rating: 0,
                            priority: priority,
                            createdAt: new Date().toISOString(),
                            title: metadata.title,
                            thumbnail: metadata.thumbnail,
                            domain: metadata.domain,
                            aiSummary: aiSummary // ğŸ¤– æ–°æ©Ÿèƒ½: é«˜ç²¾åº¦AIè¦ç´„
                        };
                        setUrlItems(prevItems => [...prevItems, newItem]);
                    } catch (error) {
                        console.error('URLãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—:', error);
                        const newItem = {
                            id: new Date().toISOString() + '_' + Math.random().toString(36).substr(2, 9),
                            url,
                            genre,
                            comment,
                            isRead: false,
                            rating: 0,
                            priority: priority,
                            createdAt: new Date().toISOString(),
                            title: 'Webãƒšãƒ¼ã‚¸',
                            thumbnail: 'ğŸŒ',
                            domain: '',
                            aiSummary: ''
                        };
                        setUrlItems(prevItems => [...prevItems, newItem]);
                    }
                }
            }, [urlItems, fetchDetailedMetadata, classifyGenre, generateIntelligentSummary]);

            const deleteUrlItem = useCallback((id) => {
                setUrlItems(prevItems => prevItems.filter(item => item.id !== id));
            }, []);

            const toggleReadStatus = useCallback((id) => {
                setUrlItems(prevItems =>
                    prevItems.map(item =>
                        item.id === id ? { ...item, isRead: !item.isRead } : item
                    )
                );
            }, []);

            const setRating = useCallback((id, rating) => {
                setUrlItems(prevItems =>
                    prevItems.map(item =>
                        item.id === id ? { ...item, rating } : item
                    )
                );
            }, []);

            const setPriority = useCallback((id, priority) => {
                setUrlItems(prevItems =>
                    prevItems.map(item =>
                        item.id === id ? { ...item, priority } : item
                    )
                );
            }, []);

            const updateComment = useCallback((id, comment) => {
                setUrlItems(prevItems =>
                    prevItems.map(item =>
                        item.id === id ? { ...item, comment } : item
                    )
                );
            }, []);

            const moveUrlItem = useCallback((id, direction) => {
                console.log(`Moving item ${id} ${direction}`);
                
                setUrlItems(prevItems => {
                    const currentIndex = prevItems.findIndex(item => item.id === id);
                    console.log(`Current index: ${currentIndex}, Total items: ${prevItems.length}`);
                    
                    if (currentIndex === -1) {
                        console.log('Item not found!');
                        return prevItems;
                    }
                    
                    const swapIndex = direction === 'up' ? currentIndex - 1 : currentIndex + 1;
                    console.log(`Swap index: ${swapIndex}`);

                    if (swapIndex < 0 || swapIndex >= prevItems.length) {
                        console.log('Cannot move - out of bounds');
                        return prevItems;
                    }

                    const newItems = [...prevItems];
                    [newItems[currentIndex], newItems[swapIndex]] = [newItems[swapIndex], newItems[currentIndex]];
                    
                    console.log('Move successful!');
                    return newItems;
                });
            }, []);

            const handleSort = useCallback((newSortBy) => {
                if (sortBy === newSortBy) {
                    setSortDirection(prev => prev === 'asc' ? 'desc' : 'asc');
                } else {
                    setSortBy(newSortBy);
                    setSortDirection(newSortBy === 'created' ? 'desc' : 'asc');
                }
            }, [sortBy]);

            const genres = ['ã™ã¹ã¦', ...Array.from(new Set(urlItems.map(item => item.genre)))];
            
            const filteredAndSortedItems = useMemo(() => {
                let filtered = urlItems.filter(item => {
                    const matchesGenre = filterGenre === 'ã™ã¹ã¦' || item.genre === filterGenre;
                    const matchesSearch = searchQuery === '' || 
                        item.url.toLowerCase().includes(searchQuery.toLowerCase()) ||
                        item.genre.toLowerCase().includes(searchQuery.toLowerCase()) ||
                        (item.title && item.title.toLowerCase().includes(searchQuery.toLowerCase())) ||
                        (item.comment && item.comment.toLowerCase().includes(searchQuery.toLowerCase())) ||
                        (item.aiSummary && item.aiSummary.toLowerCase().includes(searchQuery.toLowerCase()));
                    const matchesReadStatus = readStatusFilter === 'ã™ã¹ã¦' ||
                        (readStatusFilter === 'æœªèª­' && !item.isRead) ||
                        (readStatusFilter === 'æ—¢èª­' && item.isRead);
                    
                    return matchesGenre && matchesSearch && matchesReadStatus;
                });

                if (sortBy !== 'created' || sortDirection !== 'desc') {
                    filtered.sort((a, b) => {
                        let comparison = 0;
                        
                        switch (sortBy) {
                            case 'priority':
                                comparison = b.priority - a.priority;
                                break;
                            case 'rating':
                                comparison = b.rating - a.rating;
                                break;
                            case 'created':
                                comparison = new Date(b.createdAt) - new Date(a.createdAt);
                                break;
                            case 'genre':
                                comparison = a.genre.localeCompare(b.genre, 'ja');
                                break;
                            default:
                                comparison = 0;
                        }
                        
                        return sortDirection === 'asc' ? comparison : -comparison;
                    });
                }

                return filtered;
            }, [urlItems, filterGenre, searchQuery, readStatusFilter, sortBy, sortDirection]);

            return (
                <div className="min-h-screen bg-slate-100 font-sans text-slate-800">
                    <header className="bg-white shadow-md">
                        <div className="max-w-4xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
                            <h1 className="text-3xl font-bold tracking-tight text-slate-900">
                                èª­ã¿ãŸã„ã‚‚ã®ãƒªã‚¹ãƒˆ ğŸ”¥
                            </h1>
                            <p className="mt-2 text-slate-600">æ°—ã«ãªã‚‹Webã‚µã‚¤ãƒˆã‚’ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—ã—ã¦ã€ç®¡ç†ã—ã¾ã—ã‚‡ã†ã€‚</p>
                            <div className="mt-2 text-sm text-blue-600 bg-blue-50 p-2 rounded flex items-center">
                                <span className="mr-2 px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full">v2.4</span>
                                ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼ID: {getUserId().substr(-8)} | ğŸ•’ æœ€çµ‚æ›´æ–°: {new Date().toLocaleString('ja-JP')}
                            </div>
                            {/* ğŸ¤– æ–°æ©Ÿèƒ½å‘ŠçŸ¥ */}
                            <div className="mt-2 text-sm text-emerald-600 bg-emerald-50 p-2 rounded flex items-center">
                                <span className="mr-2 px-2 py-1 bg-emerald-100 text-emerald-700 text-xs rounded-full">ğŸ§  SMART</span>
                                âœ¨ é«˜ç²¾åº¦AIè¦ç´„æ©Ÿèƒ½ï¼URLã®æ§‹é€ ã¨ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰è©³ç´°ãªè¦ç´„ã‚’è‡ªå‹•ç”Ÿæˆã—ã¾ã™
                            </div>
                        </div>
                    </header>
                    
                    <main className="max-w-4xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
                        <div className="bg-white p-6 rounded-xl shadow-lg mb-8">
                            <h2 className="text-xl font-semibold mb-4 text-slate-700">æ–°ã—ã„URLã‚’è¿½åŠ </h2>
                            <UrlInput onAdd={addUrlItem} urlItems={urlItems} />
                        </div>

                        <div className="bg-white p-6 rounded-xl shadow-lg mb-8">
                            <div className="flex items-center gap-2 mb-2">
                                <SearchIcon className="h-5 w-5 text-slate-400" />
                                <h2 className="text-xl font-semibold text-slate-700">æ¤œç´¢</h2>
                                <span className="px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full">é«˜ç²¾åº¦AIè¦ç´„æ¤œç´¢å¯¾å¿œ</span>
                            </div>
                            <input
                                type="text"
                                value={searchQuery}
                                onChange={(e) => setSearchQuery(e.target.value)}
                                placeholder="ã‚¿ã‚¤ãƒˆãƒ«ã€ã‚¸ãƒ£ãƒ³ãƒ«ã€ã‚³ãƒ¡ãƒ³ãƒˆã€AIè¦ç´„ã§æ¤œç´¢..."
                                className="w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500"
                            />
                            {searchQuery && (
                                <div className="mt-2 flex items-center justify-between">
                                    <p className="text-sm text-slate-600">
                                        ã€Œ{searchQuery}ã€ã®æ¤œç´¢çµæœ: {filteredAndSortedItems.length}ä»¶
                                    </p>
                                    <button
                                        onClick={() => setSearchQuery('')}
                                        className="text-sm text-sky-600 hover:text-sky-800"
                                    >
                                        ã‚¯ãƒªã‚¢
                                    </button>
                                </div>
                            )}
                        </div>

                        {urlItems.length > 0 && (
                            <div className="bg-white p-6 rounded-xl shadow-lg mb-8">
                                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
                                    <GenreFilter
                                        genres={genres}
                                        selectedGenre={filterGenre}
                                        onFilterChange={setFilterGenre}
                                    />
                                    <ReadStatusFilter
                                        selectedStatus={readStatusFilter}
                                        onFilterChange={setReadStatusFilter}
                                    />
                                </div>
                                
                                <div className="border-t pt-4">
                                    <div className="flex flex-wrap gap-2 mb-2">
                                        <span className="text-sm font-medium text-slate-700 mr-2 flex items-center">ä¸¦ã³é †:</span>
                                        <SortButton 
                                            sortBy="created" 
                                            currentSort={sortBy} 
                                            sortDirection={sortDirection}
                                            onClick={handleSort}
                                            label="è¿½åŠ æ—¥æ™‚"
                                        />
                                        <SortButton 
                                            sortBy="priority" 
                                            currentSort={sortBy} 
                                            sortDirection={sortDirection}
                                            onClick={handleSort}
                                            label="å„ªå…ˆåº¦"
                                        />
                                        <SortButton 
                                            sortBy="rating" 
                                            currentSort={sortBy} 
                                            sortDirection={sortDirection}
                                            onClick={handleSort}
                                            label="è©•ä¾¡"
                                        />
                                        <SortButton 
                                            sortBy="genre" 
                                            currentSort={sortBy} 
                                            sortDirection={sortDirection}
                                            onClick={handleSort}
                                            label="ã‚¸ãƒ£ãƒ³ãƒ«"
                                        />
                                    </div>
                                    <p className="text-xs text-slate-500 bg-yellow-50 p-2 rounded">
                                        ğŸ’¡ ãƒ’ãƒ³ãƒˆ: ä¸Šä¸‹ç§»å‹•ãƒœã‚¿ãƒ³ã§æ‰‹å‹•ã§é †ç•ªã‚’å¤‰æ›´ã§ãã¾ã™ã€‚ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½ã‚’ä½¿ç”¨ã™ã‚‹ã¨æ‰‹å‹•ã®é †ç•ªã¯ãƒªã‚»ãƒƒãƒˆã•ã‚Œã¾ã™ã€‚
                                    </p>
                                </div>
                                
                                <div className="mt-4 grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm">
                                    <div className="text-center">
                                        <div className="font-semibold text-slate-900">{urlItems.length}</div>
                                        <div className="text-slate-600">ç·æ•°</div>
                                    </div>
                                    <div className="text-center">
                                        <div className="font-semibold text-blue-600">{urlItems.filter(item => !item.isRead).length}</div>
                                        <div className="text-slate-600">æœªèª­</div>
                                    </div>
                                    <div className="text-center">
                                        <div className="font-semibold text-green-600">{urlItems.filter(item => item.isRead).length}</div>
                                        <div className="text-slate-600">æ—¢èª­</div>
                                    </div>
                                    <div className="text-center">
                                        <div className="font-semibold text-yellow-600">{filteredAndSortedItems.length}</div>
                                        <div className="text-slate-600">è¡¨ç¤ºä¸­</div>
                                    </div>
                                </div>
                            </div>
                        )}

                        <UrlList
                            items={filteredAndSortedItems}
                            allItems={urlItems}
                            onDelete={deleteUrlItem}
                            onToggleRead={toggleReadStatus}
                            onSetRating={setRating}
                            onSetPriority={setPriority}
                            onMove={moveUrlItem}
                            onUpdateComment={updateComment}
                        />

                        {/* ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆæœ€ä¸‹éƒ¨ï¼‰ */}
                        <div className="bg-gradient-to-r from-green-50 to-blue-50 p-6 rounded-xl shadow-lg mt-8 border border-green-200">
                            <h2 className="text-xl font-semibold mb-4 text-slate-700 flex items-center">
                                ğŸ› ï¸ ãƒ‡ãƒ¼ã‚¿ç®¡ç†
                                <span className="ml-2 px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full">æ©Ÿèƒ½</span>
                            </h2>
                            <div className="flex flex-wrap gap-3 mb-4">
                                <button
                                    onClick={exportData}
                                    className="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors flex items-center gap-2"
                                >
                                    ğŸ“¤ ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
                                </button>
                                <button
                                    onClick={() => document.getElementById('importFile').click()}
                                    className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors flex items-center gap-2"
                                >
                                    ğŸ“¥ ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
                                </button>
                                <button
                                    onClick={clearAllData}
                                    className="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors flex items-center gap-2"
                                >
                                    ğŸ—‘ï¸ å…¨ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªã‚¢
                                </button>
                                <input
                                    type="file"
                                    id="importFile"
                                    accept=".json"
                                    onChange={importData}
                                    style={{ display: 'none' }}
                                />
                            </div>
                            <div className="bg-white p-4 rounded-lg border border-blue-200">
                                <h3 className="text-sm font-medium text-blue-800 mb-2 flex items-center">
                                    ğŸ’¡ ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰
                                </h3>
                                <ul className="text-sm text-blue-700 space-y-1">
                                    <li><strong>ğŸ“¤ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</strong>ï¼šç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’JSONãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ä¿å­˜ã§ãã¾ã™</li>
                                    <li><strong>ğŸ“¥ ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</strong>ï¼šä»–ã®ãƒ‡ãƒã‚¤ã‚¹ã‹ã‚‰ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚ã¾ã™</li>
                                    <li><strong>ğŸ—‘ï¸ ã‚¯ãƒªã‚¢</strong>ï¼šå…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã™ï¼ˆå–ã‚Šæ¶ˆã—ä¸å¯ï¼‰</li>
                                    <li><strong>ğŸ‘¥ å…±æœ‰</strong>ï¼šã“ã®ã‚µã‚¤ãƒˆã®URLã‚’æ•™ãˆã‚‹ã ã‘ã§ã€å‹äººã‚‚å€‹åˆ¥ã«ãƒ‡ãƒ¼ã‚¿ç®¡ç†å¯èƒ½</li>
                                    <li><strong>ğŸ’¬ ã‚³ãƒ¡ãƒ³ãƒˆ</strong>ï¼šå„URLã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¿½åŠ ã§ãã¾ã™</li>
                                    <li><strong>ğŸ”¥ å„ªå…ˆåº¦</strong>ï¼šURLè¿½åŠ æ™‚ã«å„ªå…ˆåº¦ã‚‚è¨­å®šã§ãã¾ã™</li>
                                    <li><strong>âœ¨ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</strong>ï¼šURLã®ã‚¿ã‚¤ãƒˆãƒ«ã¨ã‚µãƒ ãƒã‚¤ãƒ«ã‚’è‡ªå‹•å–å¾—ã—ã¾ã™</li>
                                    <li><strong>ğŸ¤– è‡ªå‹•åˆ†é¡</strong>ï¼šURLã‹ã‚‰è‡ªå‹•ã§ã‚¸ãƒ£ãƒ³ãƒ«ã‚’åˆ¤å®šã§ãã¾ã™</li>
                                    <li><strong>ğŸ§  é«˜ç²¾åº¦AIè¦ç´„</strong>ï¼šURLã®æ§‹é€ ãƒ»ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰è©³ç´°ãªè¦ç´„ã‚’è‡ªå‹•ç”Ÿæˆã—ã¾ã™</li>
                                </ul>
                            </div>
                        </div>
                    </main>
                </div>
            );
        };

        // ğŸ¤– æ–°æ©Ÿèƒ½å¯¾å¿œ: UrlInput ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆé«˜ç²¾åº¦AIè¦ç´„æ©Ÿèƒ½è¿½åŠ ï¼‰
        const UrlInput = ({ onAdd, urlItems }) => {
            const [url, setUrl] = useState('');
            const [genre, setGenre] = useState('æœªåˆ†é¡');
            const [customGenre, setCustomGenre] = useState('');
            const [isCustomGenre, setIsCustomGenre] = useState(false);
            const [priority, setPriority] = useState(0);
            const [comment, setComment] = useState('');
            const [useAutoClassify, setUseAutoClassify] = useState(true);
            const [useAISummary, setUseAISummary] = useState(true);
            const [isLoading, setIsLoading] = useState(false);

            const existingGenres = useMemo(() => {
                const genres = new Set(['æœªåˆ†é¡']);
                urlItems.forEach(item => {
                    if (item.genre && item.genre.trim()) {
                        genres.add(item.genre);
                    }
                });
                return Array.from(genres).sort();
            }, [urlItems]);

            const handleSubmit = async (e) => {
                e.preventDefault();
                if (url.trim()) {
                    setIsLoading(true);
                    try {
                        const finalGenre = isCustomGenre && customGenre.trim() ? customGenre.trim() : genre;
                        await onAdd(url.trim(), finalGenre, priority, comment.trim(), useAutoClassify, useAISummary);
                        setUrl('');
                        setGenre('æœªåˆ†é¡');
                        setCustomGenre('');
                        setIsCustomGenre(false);
                        setPriority(0);
                        setComment('');
                    } finally {
                        setIsLoading(false);
                    }
                }
            };

            const handleGenreChange = (e) => {
                const value = e.target.value;
                if (value === 'custom') {
                    setIsCustomGenre(true);
                    setGenre('æœªåˆ†é¡');
                } else {
                    setIsCustomGenre(false);
                    setGenre(value);
                    setCustomGenre('');
                }
            };

            return (
                <form onSubmit={handleSubmit} className="space-y-4">
                    <div>
                        <label htmlFor="url-input" className="block text-sm font-medium text-slate-700 mb-2">
                            URL
                        </label>
                        <input
                            id="url-input"
                            type="url"
                            value={url}
                            onChange={(e) => setUrl(e.target.value)}
                            placeholder="https://example.com"
                            className="w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500"
                            required
                            disabled={isLoading}
                        />
                    </div>
                    
                    {/* é«˜ç²¾åº¦AIæ©Ÿèƒ½è¨­å®š */}
                    <div className="space-y-3 p-4 bg-gradient-to-r from-purple-50 to-emerald-50 rounded-lg border border-purple-200">
                        <h3 className="text-sm font-medium text-slate-700 flex items-center">
                            ğŸ§  é«˜ç²¾åº¦AIæ©Ÿèƒ½è¨­å®š
                            <span className="ml-2 px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded-full">SMART</span>
                        </h3>
                        
                        <div className="flex items-center space-x-2">
                            <input
                                id="auto-classify"
                                type="checkbox"
                                checked={useAutoClassify}
                                onChange={(e) => setUseAutoClassify(e.target.checked)}
                                className="h-4 w-4 text-purple-600 focus:ring-purple-500 border-purple-300 rounded"
                                disabled={isLoading}
                            />
                            <label htmlFor="auto-classify" className="text-sm text-purple-700">
                                ğŸ·ï¸ è‡ªå‹•ã‚¸ãƒ£ãƒ³ãƒ«åˆ†é¡ï¼ˆãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒ—åˆ†æï¼‰
                            </label>
                        </div>

                        <div className="flex items-center space-x-2">
                            <input
                                id="ai-summary"
                                type="checkbox"
                                checked={useAISummary}
                                onChange={(e) => setUseAISummary(e.target.checked)}
                                className="h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-emerald-300 rounded"
                                disabled={isLoading}
                            />
                            <label htmlFor="ai-summary" className="text-sm text-emerald-700">
                                ğŸ§  é«˜ç²¾åº¦AIè¦ç´„ç”Ÿæˆï¼ˆãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿åˆ†æãƒ»æœ€å¤§120æ–‡å­—ï¼‰
                            </label>
                        </div>
                        
                        <div className="text-xs text-slate-600 bg-white p-2 rounded border">
                            ğŸ’¡ <strong>é«˜ç²¾åº¦AIè¦ç´„ã¨ã¯ï¼Ÿ</strong><br/>
                            URLã®æ§‹é€ ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ã€ãƒ‘ã‚¹ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è©³ç´°åˆ†æã—ã€ãƒšãƒ¼ã‚¸ã®ç¨®é¡ï¼ˆå‹•ç”»/è¨˜äº‹/ãƒªãƒã‚¸ãƒˆãƒªç­‰ï¼‰ã‚’åˆ¤å®šã€‚
                            å„ã‚¿ã‚¤ãƒ—ã«æœ€é©åŒ–ã•ã‚ŒãŸè¦ç´„ã‚’è‡ªå‹•ç”Ÿæˆã—ã¾ã™ã€‚
                        </div>
                    </div>

                    {!useAutoClassify && (
                        <div>
                            <label htmlFor="genre-select" className="block text-sm font-medium text-slate-700 mb-2 flex items-center">
                                ã‚¸ãƒ£ãƒ³ãƒ«
                                {existingGenres.length > 1 && (
                                    <span className="ml-2 px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full">
                                        {existingGenres.length - 1}å€‹ã®æ—¢å­˜ã‚¸ãƒ£ãƒ³ãƒ«
                                    </span>
                                )}
                            </label>
                            <select
                                id="genre-select"
                                value={isCustomGenre ? 'custom' : genre}
                                onChange={handleGenreChange}
                                className="w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500"
                                disabled={isLoading}
                            >
                                {existingGenres.map((existingGenre) => (
                                    <option key={existingGenre} value={existingGenre}>
                                        {existingGenre}
                                    </option>
                                ))}
                                <option value="custom">+ æ–°ã—ã„ã‚¸ãƒ£ãƒ³ãƒ«ã‚’è¿½åŠ </option>
                            </select>
                            
                            {isCustomGenre && (
                                <input
                                    type="text"
                                    value={customGenre}
                                    onChange={(e) => setCustomGenre(e.target.value)}
                                    placeholder="æ–°ã—ã„ã‚¸ãƒ£ãƒ³ãƒ«åã‚’å…¥åŠ›"
                                    className="w-full mt-2 px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500"
                                    autoFocus
                                    disabled={isLoading}
                                />
                            )}
                        </div>
                    )}

                    <div>
                        <label htmlFor="priority-select" className="block text-sm font-medium text-slate-700 mb-2 flex items-center">
                            å„ªå…ˆåº¦
                            <span className="ml-2 px-2 py-1 bg-red-100 text-red-700 text-xs rounded-full">æ©Ÿèƒ½</span>
                        </label>
                        <select
                            id="priority-select"
                            value={priority}
                            onChange={(e) => setPriority(parseInt(e.target.value))}
                            className="w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500"
                            disabled={isLoading}
                        >
                            <option value={0}>0 - å„ªå…ˆåº¦ãªã—</option>
                            <option value={1}>1 - ä½</option>
                            <option value={2}>2 - ã‚„ã‚„ä½</option>
                            <option value={3}>3 - ä¸­</option>
                            <option value={4}>4 - ã‚„ã‚„é«˜</option>
                            <option value={5}>5 - é«˜</option>
                        </select>
                    </div>

                    <div>
                        <label htmlFor="comment-input" className="block text-sm font-medium text-slate-700 mb-2 flex items-center">
                            ã‚³ãƒ¡ãƒ³ãƒˆãƒ»ãƒ¡ãƒ¢
                            <span className="ml-2 px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full">æ©Ÿèƒ½</span>
                        </label>
                        <textarea
                            id="comment-input"
                            value={comment}
                            onChange={(e) => setComment(e.target.value)}
                            placeholder="ã“ã®ã‚µã‚¤ãƒˆã«ã¤ã„ã¦ã®ãƒ¡ãƒ¢ã‚„ã‚³ãƒ¡ãƒ³ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..."
                            rows="3"
                            className="w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500 resize-vertical"
                            disabled={isLoading}
                        />
                    </div>
                    
                    <button
                        type="submit"
                        disabled={isLoading}
                        className={`w-full py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2 transition-colors ${
                            isLoading 
                                ? 'bg-slate-400 text-white cursor-not-allowed'
                                : 'bg-sky-600 text-white hover:bg-sky-700'
                        }`}
                    >
                        {isLoading ? (
                            <span className="flex items-center justify-center">
                                <svg className="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                    <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                                    <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                </svg>
                                é«˜ç²¾åº¦AIåˆ†æä¸­...
                            </span>
                        ) : (
                            'è¿½åŠ '
                        )}
                    </button>
                </form>
            );
        };

        // GenreFilter ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
        const GenreFilter = ({ genres, selectedGenre, onFilterChange }) => {
            return (
                <div>
                    <label htmlFor="genre-filter" className="block text-sm font-medium text-slate-700 mb-2">
                        ã‚¸ãƒ£ãƒ³ãƒ«ã§çµã‚Šè¾¼ã¿
                    </label>
                    <select
                        id="genre-filter"
                        value={selectedGenre}
                        onChange={(e) => onFilterChange(e.target.value)}
                        className="w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500"
                    >
                        {genres.map(genre => (
                            <option key={genre} value={genre}>{genre}</option>
                        ))}
                    </select>
                </div>
            );
        };

        // ReadStatusFilter ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
        const ReadStatusFilter = ({ selectedStatus, onFilterChange }) => {
            return (
                <div>
                    <label htmlFor="read-status-filter" className="block text-sm font-medium text-slate-700 mb-2">
                        æœªèª­ãƒ»æ—¢èª­ã§çµã‚Šè¾¼ã¿
                    </label>
                    <select
                        id="read-status-filter"
                        value={selectedStatus}
                        onChange={(e) => onFilterChange(e.target.value)}
                        className="w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500"
                    >
                        <option value="ã™ã¹ã¦">ã™ã¹ã¦</option>
                        <option value="æœªèª­">æœªèª­ã®ã¿</option>
                        <option value="æ—¢èª­">æ—¢èª­ã®ã¿</option>
                    </select>
                </div>
            );
        };

        // SortButton ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
        const SortButton = ({ sortBy, currentSort, sortDirection, onClick, label }) => {
            const isActive = currentSort === sortBy;
            const showArrow = isActive;
            
            return (
                <button
                    onClick={() => onClick(sortBy)}
                    className={`flex items-center gap-1 px-3 py-1 rounded-md text-sm font-medium transition-colors ${
                        isActive 
                            ? 'bg-sky-100 text-sky-700 border border-sky-300' 
                            : 'bg-slate-100 text-slate-600 hover:bg-slate-200 border border-slate-300'
                    }`}
                >
                    <span>{label}</span>
                    {showArrow && (
                        sortDirection === 'asc' ? 
                            <ArrowUpIcon className="h-3 w-3" /> : 
                            <ArrowDownIcon className="h-3 w-3" />
                    )}
                </button>
            );
        };

        // UrlList ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
        const UrlList = ({ items, allItems, onDelete, onToggleRead, onSetRating, onSetPriority, onMove, onUpdateComment }) => {
            if (items.length === 0) {
                return (
                    <div className="bg-white p-8 rounded-xl shadow-lg text-center">
                        <div className="text-slate-400 mb-4">
                            <svg className="mx-auto h-16 w-16" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                            </svg>
                        </div>
                        <h3 className="text-lg font-medium text-slate-900 mb-2">
                            {allItems.length === 0 ? 'ãƒªã‚¹ãƒˆã¯ç©ºã§ã™' : 'è©²å½“ã™ã‚‹ã‚¢ã‚¤ãƒ†ãƒ ãŒã‚ã‚Šã¾ã›ã‚“'}
                        </h3>
                        <p className="text-slate-500">
                            {allItems.length === 0 
                                ? 'ä¸Šéƒ¨ã®ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰URLã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚'
                                : 'æ¤œç´¢æ¡ä»¶ã‚„ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’å¤‰æ›´ã—ã¦ã¿ã¦ãã ã•ã„ã€‚'
                            }
                        </p>
                    </div>
                );
            }

            return (
                <div className="space-y-4">
                    {items.map((item) => (
                        <UrlItem
                            key={item.id}
                            item={item}
                            allItems={allItems}
                            onDelete={onDelete}
                            onToggleRead={onToggleRead}
                            onSetRating={onSetRating}
                            onSetPriority={onSetPriority}
                            onMove={onMove}
                            onUpdateComment={onUpdateComment}
                        />
                    ))}
                </div>
            );
        };

        // ğŸ¤– ä¿®æ­£: UrlItem ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆé«˜ç²¾åº¦AIè¦ç´„è¡¨ç¤ºã¨ã‚¿ã‚¤ãƒˆãƒ«å„ªå…ˆè¡¨ç¤ºå¯¾å¿œï¼‰
        const UrlItem = ({ item, allItems, onDelete, onToggleRead, onSetRating, onSetPriority, onMove, onUpdateComment }) => {
            const [isEditingComment, setIsEditingComment] = useState(false);
            const [commentText, setCommentText] = useState(item.comment || '');
            
            const originalIndex = allItems.findIndex(originalItem => originalItem.id === item.id);
            const canMoveUp = originalIndex > 0;
            const canMoveDown = originalIndex < allItems.length - 1;

            const formatDate = (dateString) => {
                try {
                    const date = new Date(dateString);
                    return date.toLocaleString('ja-JP', {
                        year: 'numeric',
                        month: 'short',
                        day: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    });
                } catch {
                    return 'æ—¥æ™‚ä¸æ˜';
                }
            };

            const handleCommentSave = () => {
                onUpdateComment(item.id, commentText);
                setIsEditingComment(false);
            };

            const handleCommentCancel = () => {
                setCommentText(item.comment || '');
                setIsEditingComment(false);
            };

            const handleMoveUp = () => {
                console.log('Move up clicked for item:', item.id);
                onMove(item.id, 'up');
            };

            const handleMoveDown = () => {
                console.log('Move down clicked for item:', item.id);
                onMove(item.id, 'down');
            };

            return (
                <div className={`bg-white rounded-xl shadow-lg p-6 border-l-4 ${item.isRead ? 'border-green-500 bg-green-50' : 'border-sky-500'}`}>
                    <div className="flex justify-between items-start">
                        <div className="flex-1 min-w-0">
                            <div className="flex items-start gap-3 mb-3">
                                <div className="text-2xl">{item.thumbnail || 'ğŸŒ'}</div>
                                <div className="flex-1">
                                    <div className="flex items-center gap-2 mb-2">
                                        <span className="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-800">
                                            {item.genre}
                                        </span>
                                        {item.isRead && (
                                            <span className="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                                æ—¢èª­
                                            </span>
                                        )}
                                        {item.priority > 0 && (
                                            <span className="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                                å„ªå…ˆåº¦ {item.priority}
                                            </span>
                                        )}
                                    </div>
                                    
                                    {/* ã‚¿ã‚¤ãƒˆãƒ«ã‚’å„ªå…ˆè¡¨ç¤ºã€URLã¯å°ã•ã */}
                                    {item.title && (
                                        <h3 className="text-lg font-semibold text-slate-900 mb-2 leading-tight">
                                            <a
                                                href={item.url}
                                                target="_blank"
                                                rel="noopener noreferrer"
                                                className="text-slate-900 hover:text-sky-600 transition-colors"
                                            >
                                                {item.title}
                                            </a>
                                        </h3>
                                    )}
                                    
                                    {item.domain && (
                                        <p className="text-sm text-slate-500 mb-2">ğŸ“ {item.domain}</p>
                                    )}
                                    
                                    {/* URLã¯å°ã•ãè¡¨ç¤º */}
                                    <a
                                        href={item.url}
                                        target="_blank"
                                        rel="noopener noreferrer"
                                        className="text-xs text-sky-600 hover:text-sky-800 break-all block mb-3"
                                    >
                                        ğŸ”— {item.url}
                                    </a>
                                </div>
                            </div>
                            
                            {/* ğŸ¤– æ–°æ©Ÿèƒ½: é«˜ç²¾åº¦AIè¦ç´„è¡¨ç¤º */}
                            {item.aiSummary && (
                                <div className="mb-3 p-3 bg-gradient-to-r from-emerald-50 to-blue-50 rounded-lg border border-emerald-200">
                                    <div className="flex items-center mb-2">
                                        <span className="text-sm font-medium text-emerald-700 flex items-center">
                                            ğŸ§  é«˜ç²¾åº¦AIè¦ç´„
                                            <span className="ml-2 px-2 py-1 bg-emerald-100 text-emerald-700 text-xs rounded-full">SMART</span>
                                        </span>
                                    </div>
                                    <p className="text-sm text-slate-700 leading-relaxed">{item.aiSummary}</p>
                                </div>
                            )}
                            
                            {/* ã‚³ãƒ¡ãƒ³ãƒˆè¡¨ç¤ºãƒ»ç·¨é›† */}
                            <div className="mt-3 p-3 bg-slate-50 rounded-lg border">
                                <div className="flex items-center justify-between mb-2">
                                    <span className="text-sm font-medium text-slate-700 flex items-center">
                                        ğŸ’¬ ã‚³ãƒ¡ãƒ³ãƒˆ
                                        <span className="ml-2 px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full">æ©Ÿèƒ½</span>
                                    </span>
                                    <button
                                        onClick={() => setIsEditingComment(!isEditingComment)}
                                        className="text-xs text-sky-600 hover:text-sky-800"
                                    >
                                        {isEditingComment ? 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«' : 'ç·¨é›†'}
                                    </button>
                                </div>
                                {isEditingComment ? (
                                    <div className="space-y-2">
                                        <textarea
                                            value={commentText}
                                            onChange={(e) => setCommentText(e.target.value)}
                                            placeholder="ã‚³ãƒ¡ãƒ³ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..."
                                            rows="3"
                                            className="w-full px-3 py-2 border border-slate-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500 resize-vertical"
                                        />
                                        <div className="flex gap-2">
                                            <button
                                                onClick={handleCommentSave}
                                                className="px-3 py-1 bg-sky-600 text-white rounded text-xs hover:bg-sky-700"
                                            >
                                                ä¿å­˜
                                            </button>
                                            <button
                                                onClick={handleCommentCancel}
                                                className="px-3 py-1 bg-slate-300 text-slate-700 rounded text-xs hover:bg-slate-400"
                                            >
                                                ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                                            </button>
                                        </div>
                                    </div>
                                ) : (
                                    <div className="text-sm text-slate-600">
                                        {item.comment ? (
                                            <div className="whitespace-pre-wrap break-words">{item.comment}</div>
                                        ) : (
                                            <span className="text-slate-400 italic">ã‚³ãƒ¡ãƒ³ãƒˆãŒã‚ã‚Šã¾ã›ã‚“</span>
                                        )}
                                    </div>
                                )}
                            </div>

                            <div className="flex items-center mt-2">
                                <span className="text-sm text-slate-500 mr-2">å„ªå…ˆåº¦:</span>
                                <StarRating 
                                    rating={item.priority} 
                                    onRate={(priority) => onSetPriority(item.id, priority)}
                                    color="red"
                                />
                            </div>
                            <div className="flex items-center mt-2">
                                <span className="text-sm text-slate-500 mr-2">è©•ä¾¡:</span>
                                <StarRating 
                                    rating={item.rating} 
                                    onRate={(rating) => onSetRating(item.id, rating)}
                                    color="yellow"
                                />
                            </div>
                            <div className="flex items-center mt-2 text-xs text-slate-400">
                                <CalendarIcon className="h-3 w-3 mr-1" />
                                <span>è¿½åŠ æ—¥æ™‚: {formatDate(item.createdAt)}</span>
                            </div>
                        </div>
                        <div className="flex flex-col gap-2 ml-4">
                            <div className="flex flex-col gap-1">
                                {canMoveUp ? (
                                    <button
                                        onClick={handleMoveUp}
                                        className="p-2 text-white bg-blue-500 hover:bg-blue-600 rounded shadow-sm transition-all duration-200"
                                        title="ä¸Šã«ç§»å‹•"
                                    >
                                        <ArrowUpIcon className="h-4 w-4" />
                                    </button>
                                ) : (
                                    <div className="p-2 text-slate-300 bg-slate-100 rounded">
                                        <ArrowUpIcon className="h-4 w-4" />
                                    </div>
                                )}
                                {canMoveDown ? (
                                    <button
                                        onClick={handleMoveDown}
                                        className="p-2 text-white bg-blue-500 hover:bg-blue-600 rounded shadow-sm transition-all duration-200"
                                        title="ä¸‹ã«ç§»å‹•"
                                    >
                                        <ArrowDownIcon className="h-4 w-4" />
                                    </button>
                                ) : (
                                    <div className="p-2 text-slate-300 bg-slate-100 rounded">
                                        <ArrowDownIcon className="h-4 w-4" />
                                    </div>
                                )}
                            </div>
                            <div className="flex gap-1 mt-2">
                                <button
                                    onClick={() => onToggleRead(item.id)}
                                    className={`px-3 py-1 rounded text-xs font-medium ${
                                        item.isRead
                                            ? 'bg-slate-200 text-slate-700 hover:bg-slate-300'
                                            : 'bg-green-600 text-white hover:bg-green-700'
                                    }`}
                                >
                                    {item.isRead ? 'æœªèª­' : 'æ—¢èª­'}
                                </button>
                                <button
                                    onClick={() => onDelete(item.id)}
                                    className="px-3 py-1 bg-red-600 text-white rounded text-xs font-medium hover:bg-red-700"
                                >
                                    å‰Šé™¤
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // StarRating ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
        const StarRating = ({ rating, onRate, color = 'yellow' }) => {
            const colorClasses = {
                yellow: {
                    active: 'text-yellow-400',
                    inactive: 'text-slate-300',
                    hover: 'hover:text-yellow-400'
                },
                red: {
                    active: 'text-red-400',
                    inactive: 'text-slate-300',
                    hover: 'hover:text-red-400'
                }
            };

            const colors = colorClasses[color];

            return (
                <div className="flex gap-1">
                    {[1, 2, 3, 4, 5].map((star) => (
                        <button
                            key={star}
                            onClick={() => onRate(star)}
                            className={`text-lg ${
                                star <= rating ? colors.active : colors.inactive
                            } ${colors.hover} transition-colors`}
                        >
                            â˜…
                        </button>
                    ))}
                </div>
            );
        };

        // ã‚¢ã‚¤ã‚³ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
        const SearchIcon = ({ className }) => (
            <svg className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
            </svg>
        );

        const CalendarIcon = ({ className }) => (
            <svg className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 002 2z" />
            </svg>
        );

        const ArrowUpIcon = ({ className }) => (
            <svg className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 15l7-7 7 7" />
            </svg>
        );

        const ArrowDownIcon = ({ className }) => (
            <svg className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
            </svg>
        );

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
